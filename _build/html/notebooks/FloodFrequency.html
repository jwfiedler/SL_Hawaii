

<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Minor Flood Frequency &#8212; Hawaii Sea Level Indicators</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="../_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script async="async" kind="hypothesis" src="https://hypothes.is/embed.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'notebooks/FloodFrequency';</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Flood Duration" href="FloodDuration.html" />
    <link rel="prev" title="Minor Flood Frequency and Duration" href="Flood.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>


  <div class="bd-header-announcement container-fluid bd-header-announcement">
    <div class="bd-header-announcement__content">In development! Please post issues and suggestions to github.</div>
  </div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/trend_map.png" class="logo__image only-light" alt="Hawaii Sea Level Indicators - Home"/>
    <script>document.write(`<img src="../_static/trend_map.png" class="logo__image only-dark" alt="Hawaii Sea Level Indicators - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Introduction
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Getting started</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../gettingStarted.html">Getting Started</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="setup.html">Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="SL_Data_Wrangling.html">Data Wrangling</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">ANNUAL</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="SL_annual.html">Sea Level Magnitude</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="regional_and_local/SL_Trend.html">Sea Level Trend</a></li>
<li class="toctree-l2"><a class="reference internal" href="regional_and_local/SL_anomaly_annual.html">Annual Sea Level Anomalies</a></li>
<li class="toctree-l2"><a class="reference internal" href="regional_and_local/SL_Rankings_annual.html">Annual Sea Level Rankings</a></li>
<li class="toctree-l2"><a class="reference internal" href="regional_and_local/SL_Extremes_annual.html">Annual Extremes</a></li>
<li class="toctree-l2"><a class="reference internal" href="regional_and_local/SL_Components_annual.html">Components of Sea Level</a></li>
<li class="toctree-l2"><a class="reference internal" href="nonstationaryGEV/monthly_extremes_non-stationaryGEV.html">Nonstationary Extremes</a></li>
</ul>
</li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="Flood.html">Minor Flood Frequency and Duration</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Minor Flood Frequency</a></li>
<li class="toctree-l2"><a class="reference internal" href="FloodDuration.html">Flood Duration</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">INTRA-ANNUAL</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="SL_intra-annual.html">Sea Level Magnitude</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="regional_and_local/SL_anomaly_intra-annual.html">Intra-Annual Sea Level Anomalies</a></li>
<li class="toctree-l2"><a class="reference internal" href="regional_and_local/SL_Extremes_intra-annual.html">Intra-Annual Extremes</a></li>
<li class="toctree-l2"><a class="reference internal" href="regional_and_local/SL_Components_intra-annual.html">Components of Sea Level</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="Flood_intra-annual.html">Minor Flood Frequency and Duration</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="FloodFrequency_intra-annual.html">Minor Flood Frequency</a></li>
<li class="toctree-l2"><a class="reference internal" href="FloodDuration_intra-annual.html">Flood Duration</a></li>
</ul>
</li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://mybinder.org/v2/gh/jwfiedler/SL_Hawaii/main?urlpath=tree/notebooks/FloodFrequency.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch onBinder"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img src="../_static/images/logo_binder.svg">
  </span>
<span class="btn__text-container">Binder</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="initThebeSBT()"
  class="btn btn-sm btn-launch-thebe dropdown-item"
  title="Launch Thebe"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-play"></i>
  </span>
<span class="btn__text-container">Live Code</span>
</button>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/jwfiedler/SL_Hawaii" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/jwfiedler/SL_Hawaii/edit/main/notebooks/FloodFrequency.ipynb" target="_blank"
   class="btn btn-sm btn-source-edit-button dropdown-item"
   title="Suggest edit"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/jwfiedler/SL_Hawaii/issues/new?title=Issue%20on%20page%20%2Fnotebooks/FloodFrequency.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/notebooks/FloodFrequency.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Minor Flood Frequency</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#setup">Setup</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#retrieve-the-preprocessed-data-set">Retrieve the Preprocessed Data Set</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#plot-the-data-to-see-what-we-ve-got">Plot the data to see what we’ve got</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#take-a-look-at-the-data">Take a look at the data</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#plot-flood-frequency-counts">Plot Flood Frequency Counts</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#plot-flood-duration">Plot Flood Duration</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#calculate-the-percent-change-over-time">Calculate the percent change over time</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#plot-time-series-of-all-stations">Plot time series of all stations</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#create-a-table">Create a Table</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#citations">Citations</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="minor-flood-frequency">
<h1>Minor Flood Frequency<a class="headerlink" href="#minor-flood-frequency" title="Permalink to this heading">#</a></h1>
<p>:::{glue:figure} threshold_counts_days_fig
:align: left
:scale: 50%
:::</p>
<p>In this notebook we will plot two indicators concerning flooding at the Hawaii tide gauges, after first taking a general look at the type of data we are able to plot from the UHSLC. These indicators are based on a ‘flooding’ threshold, using <a class="reference external" href="https://tidesandcurrents.noaa.gov/sltrends/faq.html">relative sea level</a>.</p>
<p>Download Files:
<a class="reference download internal" download="" href="../_downloads/e05c6c2f872e944506979d96f70def7e/SL_FloodFrequency_map.png"><span class="xref download myst">Map</span></a> |
<a class="reference download internal" download="" href="../_downloads/b6ef93868e21657ad682e9077180d8bc/SL_FloodFrequency_threshold_counts_days.png"><span class="xref download myst">Time Series Plot</span></a> |
<a class="reference download internal" download="" href="../_downloads/a91f70b39fb57e187e3f973c4f648c51/SL_FloodFrequency_percent_change.csv"><span class="xref download myst">Table</span></a></p>
<section id="setup">
<h2>Setup<a class="headerlink" href="#setup" title="Permalink to this heading">#</a></h2>
<p>We first need to import the necessary libraries, establish our input/output directories, and set up some basic plotting rules. We’ll do this by running another notebook called “setup.”</p>
<div class="cell tag_hide-input docutils container">
<details class="hide above-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell source</span>
<span class="expanded">Hide code cell source</span>
</summary>
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">run</span> setup.ipynb
<span class="n">data_dir</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;../data&#39;</span> <span class="p">)</span>
<span class="n">output_dir</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;../output&#39;</span><span class="p">)</span> 
</pre></div>
</div>
</div>
</details>
</div>
</section>
<section id="retrieve-the-preprocessed-data-set">
<h2>Retrieve the Preprocessed Data Set<a class="headerlink" href="#retrieve-the-preprocessed-data-set" title="Permalink to this heading">#</a></h2>
<p>In the FloodFrequencySetup notebook, we calculated the Daily Max sea level, in cm above MHHW, for stations will sufficient data for analysis. We then calculated which of those days counted as “Flood Days” based on a given threshold. We’ll import that now.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># load the data</span>
<span class="n">SL_daily_max</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="n">data_dir</span> <span class="o">/</span> <span class="s1">&#39;SL_daily_max.nc&#39;</span><span class="p">)</span>
<span class="n">SL_daily_max</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="n">hourly_data</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="n">data_dir</span> <span class="o">/</span> <span class="s1">&#39;SL_hourly_data.nc&#39;</span><span class="p">)</span>
<span class="n">hourly_data</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<section id="plot-the-data-to-see-what-we-ve-got">
<h3>Plot the data to see what we’ve got<a class="headerlink" href="#plot-the-data-to-see-what-we-ve-got" title="Permalink to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
<span class="c1"># ax.plot(rsl.time.values,rsl.sea_level_MHHW.T.values/10)</span>
<span class="c1"># ax.set_ylabel(rsl[&#39;sea_level_MHHW&#39;].long_name) #divide by 10 to convert to cm</span>
<span class="c1"># # add legend to bottom of plot</span>
<span class="c1"># ax.legend(rsl[&#39;station_name&#39;].values, bbox_to_anchor=(0.5, -0.2), loc=&#39;upper center&#39;, ncol=3)  </span>
<span class="c1"># Initial offset</span>
<span class="n">offset</span> <span class="o">=</span> <span class="mi">0</span>
<span class="c1"># The amount to offset each successive line</span>
<span class="n">offset_increment</span> <span class="o">=</span> <span class="mi">150</span>  <span class="c1"># Adjust this value based on your data scale and visual preference</span>

<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">record_id</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">hourly_data</span><span class="p">[</span><span class="s1">&#39;record_id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">):</span>
    <span class="c1"># Extract the series for this station</span>
    <span class="n">sea_level_data</span> <span class="o">=</span> <span class="n">hourly_data</span><span class="o">.</span><span class="n">sea_level_MHHW</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">record_id</span><span class="o">=</span><span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">values</span>  <span class="c1"># Convert to cm</span>
    <span class="c1"># Plot, adding the offset</span>
    <span class="c1">#add horizontal line for each station</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;:&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">hourly_data</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">sea_level_data</span> <span class="o">+</span> <span class="n">offset</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">hourly_data</span><span class="p">[</span><span class="s1">&#39;station_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">hourly_data</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">offset</span><span class="o">-</span><span class="mi">20</span><span class="p">,</span> <span class="n">hourly_data</span><span class="p">[</span><span class="s1">&#39;station_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s1">&#39;top&#39;</span><span class="p">)</span>
    <span class="c1"># Increment the offset for the next series</span>
    <span class="n">offset</span> <span class="o">+=</span> <span class="n">offset_increment</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">hourly_data</span><span class="p">[</span><span class="s1">&#39;sea_level_MHHW&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">long_name</span> <span class="o">+</span> <span class="s1">&#39; (cm, offset by 150cm per station)&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0, 0.5, &#39;Sea Level, relative to MHHW (cm, offset by 150cm per station)&#39;)
</pre></div>
</div>
<img alt="../_images/ca53f1028d6539141bd00542e39d476daffe6ce744e2250dd755a5ec7834d454.png" src="../_images/ca53f1028d6539141bd00542e39d476daffe6ce744e2250dd755a5ec7834d454.png" />
</div>
</div>
</section>
<section id="take-a-look-at-the-data">
<h3>Take a look at the data<a class="headerlink" href="#take-a-look-at-the-data" title="Permalink to this heading">#</a></h3>
<aside class="margin sidebar">
<p class="sidebar-title">A Note on Datums</p>
<p>The sea level variable in the netcdf file is sea level <strong>relative to the station datum</strong>. For more information on the data processing of this gauge, see the <a class="reference external" href="https://uhslc.soest.hawaii.edu/rqds/pacific/doc/qa007b.dmt">station metdata</a>.</p>
</aside>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># make a new figure that is 15 x 5</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">SL_daily_max</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">SL_daily_max</span><span class="o">.</span><span class="n">sea_level_MHHW</span><span class="o">.</span><span class="n">values</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="n">SL_daily_max</span><span class="o">.</span><span class="n">station_name</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Date (Calendar Year)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Sea Level (cm)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Sea Level Daily Maximum Time Series&#39;</span><span class="p">)</span>

<span class="c1"># add legend on the outside of the plot</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">1.05</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper left&#39;</span><span class="p">)</span>

<span class="c1"># # add a horizontal line at the threshold</span>
<span class="c1"># plt.axhline(threshold, color=&#39;r&#39;, linestyle=&#39;--&#39;, label=&#39;Threshold&#39;)</span>


<span class="c1"># # Correcting the threshold to find days when sea_level_MHHW is greater than 300 mm</span>
<span class="c1"># days_above_threshold = SL_daily_max.where(SL_daily_max.sea_level_MHHW/10 &gt; threshold, drop=True)</span>

<span class="c1"># # Highlighting the days above the threshold for each record_id</span>
<span class="c1"># for record_id in days_above_threshold.record_id.values:</span>
<span class="c1">#     above_threshold_per_record = days_above_threshold.sea_level_MHHW.sel(record_id=record_id)</span>
<span class="c1">#     ax.scatter(above_threshold_per_record.time.values, above_threshold_per_record.values / 10)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.legend.Legend at 0x157bf2700&gt;
</pre></div>
</div>
<img alt="../_images/83566b05ba785d963928aa5ab4aa14389b20e653ee7c7ff6c240b94741042b69.png" src="../_images/83566b05ba785d963928aa5ab4aa14389b20e653ee7c7ff6c240b94741042b69.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>

<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">ax</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">axs</span><span class="p">):</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">hourly_data</span><span class="p">[</span><span class="s1">&#39;sea_level_MHHW&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">,:],</span> <span class="n">bins</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">density</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Sea Level Data&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nanpercentile</span><span class="p">(</span><span class="n">hourly_data</span><span class="p">[</span><span class="s1">&#39;sea_level_MHHW&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">,:],</span> <span class="mi">99</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;dashed&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;97.5th Percentile&#39;</span><span class="p">)</span>

    <span class="c1"># remove y-axis label for all</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_yticklabels</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>

<span class="n">axs</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Sea Level (cm)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">hspace</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="c1"># set xlim to -150,75</span>
<span class="c1"># plt.xlim(-100,50)</span>

<span class="n">threshold_percentile</span> <span class="o">=</span> <span class="mi">99</span>
<span class="c1">#make threshold for (XX))th percentile on each gauge</span>
<span class="n">thresholds</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nanpercentile</span><span class="p">(</span><span class="n">hourly_data</span><span class="p">[</span><span class="s1">&#39;sea_level_MHHW&#39;</span><span class="p">],</span> <span class="n">threshold_percentile</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">glue</span><span class="p">(</span><span class="s2">&quot;threshold_percentile&quot;</span><span class="p">,</span><span class="n">threshold_percentile</span><span class="p">,</span><span class="n">display</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/c7298c792f83961ca46a1675a224b91eed25b3e6ca5d6066c4517e3561a5e224.png" src="../_images/c7298c792f83961ca46a1675a224b91eed25b3e6ca5d6066c4517e3561a5e224.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">thresholds</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([18.3, 20.6, 27.7, 23.7, 19.5, 18.3, 19.5, 20.8])
</pre></div>
</div>
</div>
</div>
<div class="cell tag_hide-output docutils container">
<div class="cell_input above-output-prompt docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Make a pdf of the data with 95th percentile threshold</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>


<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">ax</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">axs</span><span class="p">):</span>
    <span class="n">threshold</span> <span class="o">=</span> <span class="n">thresholds</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">hourly_data</span><span class="p">[</span><span class="s1">&#39;sea_level_MHHW&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">,:],</span> <span class="n">bins</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">density</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Sea Level Data&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">threshold</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Threshold: </span><span class="si">{:.4f}</span><span class="s1"> cm&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">threshold</span><span class="p">))</span>

    <span class="c1"># remove y-axis label for all</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_yticklabels</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="c1"># add label to dashed line</span>
    <span class="c1"># get value of middle of y-axis for label placement</span>
    <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()</span>
    <span class="n">yrange</span> <span class="o">=</span> <span class="n">ymax</span> <span class="o">-</span> <span class="n">ymin</span>
    <span class="n">y_middle</span> <span class="o">=</span> <span class="n">ymin</span> <span class="o">+</span> <span class="n">yrange</span><span class="o">/</span><span class="mi">2</span>

    <span class="n">axs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">threshold</span><span class="o">+</span><span class="mi">10</span><span class="p">,</span> <span class="n">y_middle</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">{:.1f}</span><span class="s1"> cm&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">threshold</span><span class="p">),</span> <span class="n">rotation</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
    <span class="n">axs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="o">-</span><span class="mi">150</span><span class="p">,</span><span class="n">y_middle</span><span class="p">,</span><span class="n">hourly_data</span><span class="p">[</span><span class="s1">&#39;station_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">rotation</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">)</span>

<span class="n">axs</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Sea Level (cm)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">hspace</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>


<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Sea Level (cm)&#39;</span><span class="p">)</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Probability Density&#39;</span><span class="p">,</span> <span class="n">ha</span> <span class="o">=</span> <span class="s1">&#39;left&#39;</span><span class="p">)</span>
<span class="c1"># make the title two lines</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Sea Level Histogram</span><span class="se">\n</span><span class="s1">with 99th percentile Threshold&#39;</span><span class="p">)</span>


<span class="n">glue</span><span class="p">(</span><span class="s2">&quot;histogram_fig&quot;</span><span class="p">,</span> <span class="n">fig</span><span class="p">,</span> <span class="n">display</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<details class="hide below-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell output</span>
<span class="expanded">Hide code cell output</span>
</summary>
<div class="cell_output docutils container">
<img alt="../_images/800e9eb99a3635ee290aaf51d4861154895a81ec48b9d0b3f7d4f9d57d816673.png" src="../_images/800e9eb99a3635ee290aaf51d4861154895a81ec48b9d0b3f7d4f9d57d816673.png" />
</div>
</details>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Filtering for flood days again now that &#39;flood_day&#39; has been correctly added</span>
<span class="n">flood_days_data</span> <span class="o">=</span> <span class="n">SL_daily_max</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">SL_daily_max</span><span class="o">.</span><span class="n">flood_day</span><span class="p">,</span> <span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Initialize an empty DataFrame again for the loop</span>
<span class="n">flood_days_per_year</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>

<span class="k">for</span> <span class="n">record_id</span> <span class="ow">in</span> <span class="n">SL_daily_max</span><span class="o">.</span><span class="n">record_id</span><span class="o">.</span><span class="n">values</span><span class="p">:</span>
    <span class="c1"># Extracting flood days for each record_id</span>
    <span class="n">flood_days_df</span> <span class="o">=</span> <span class="n">flood_days_data</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">record_id</span><span class="o">=</span><span class="n">record_id</span><span class="p">)</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">dim</span><span class="o">=</span><span class="s1">&#39;time&#39;</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">to_dataframe</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
    
    <span class="c1"># Extract year from the &#39;time&#39; column and count flood days</span>
    <span class="n">flood_days_df</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">flood_days_df</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">year</span>
    <span class="n">flood_days_count</span> <span class="o">=</span> <span class="n">flood_days_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;year&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">record_id</span><span class="p">)</span>
    
    <span class="c1"># Merge this count with the main DataFrame</span>
    <span class="k">if</span> <span class="n">flood_days_per_year</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
        <span class="n">flood_days_per_year</span> <span class="o">=</span> <span class="n">flood_days_count</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;year&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">flood_days_per_year</span> <span class="o">=</span> <span class="n">flood_days_per_year</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">flood_days_count</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;year&#39;</span><span class="p">),</span> <span class="n">how</span><span class="o">=</span><span class="s1">&#39;outer&#39;</span><span class="p">)</span>

<span class="c1"># Replace missing values with 0</span>
<span class="n">flood_days_per_year</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">flood_days_per_year</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">DataArray</span><span class="p">(</span><span class="n">flood_days_per_year</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">dims</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="s1">&#39;record_id&#39;</span><span class="p">),</span> <span class="n">coords</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;year&#39;</span><span class="p">:</span> <span class="n">flood_days_per_year</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;record_id&#39;</span><span class="p">:</span> <span class="n">flood_days_per_year</span><span class="o">.</span><span class="n">columns</span><span class="p">})</span>

<span class="n">flood_days_per_year</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.DataArray (year: 41, record_id: 8)&gt; Size: 3kB
array([[ 37.,  30.,   0.,  19.,  13.,  16.,  19.,   9.],
       [ 36.,  40.,   0.,  41.,  61.,  51.,  43.,  13.],
       [ 14.,  14.,   0.,  27.,  25.,  24.,  48.,   5.],
       [ 15.,  11.,   0.,   4.,   5.,   3.,   6.,  16.],
       [ 12.,  33.,   0.,  27.,  17.,  13.,   6.,  12.],
       [ 53.,  32.,   0.,  77.,  61.,  59.,  51.,   7.],
       [ 22.,  17.,   3.,   9.,  19.,  20.,  21.,   6.],
       [ 12.,   6.,   1.,   7.,   3.,  10.,  21.,   4.],
       [ 11.,  23.,   3.,  21.,  23.,   8.,  24.,   2.],
       [ 33.,  38.,   0.,  42.,  30.,  37.,  29.,   8.],
       [ 19.,  39.,   3.,  28.,   8.,  17.,  25.,  11.],
       [ 24.,   4.,   0.,  16.,  15.,   9.,  13.,   2.],
       [ 31.,  14.,   2.,  35.,  42.,  35.,  25.,  13.],
       [ 49.,  43.,   3.,  47.,  34.,  34.,  36.,   8.],
       [ 21.,  29.,   1.,  16.,  11.,  14.,  12.,   4.],
       [ 30.,   9.,   0.,   5.,   1.,   4.,   0.,  29.],
       [ 22.,  15.,   4.,  16.,  11.,   8.,  11.,   8.],
       [  4.,   3.,   0.,  13.,   7.,   7.,   6.,  14.],
       [ 44.,  29.,  10.,  33.,  19.,  25.,   7.,  10.],
       [ 27.,  22.,   0.,  15.,   7.,   6.,  10.,   9.],
...
       [ 23.,  91.,  33.,  87.,  76.,  85.,  37.,  27.],
       [  0.,  53.,  13.,  61.,  43.,  42.,  31.,  16.],
       [  0.,  46.,  31.,  79.,  67.,  73.,  63.,  10.],
       [  0.,  45.,  56.,  49.,  43.,  57.,  30.,  12.],
       [ 25.,  36.,  53.,  42.,  44.,  37.,  43.,  18.],
       [  4.,  30.,  30.,  21.,  13.,  15.,  11.,  28.],
       [ 54.,  38.,  48.,  41.,  31.,  38.,  29.,  38.],
       [ 63.,  20.,  32.,  32.,  17.,  21.,  21.,  11.],
       [ 31.,   7.,  12.,  11.,   8.,   8.,  16.,  69.],
       [ 41.,  18.,  30.,  29.,  14.,  17.,  35.,  35.],
       [ 20.,  49.,  49.,  47.,  29.,  35.,  46.,  44.],
       [ 32.,  46.,  63.,  42.,  12.,  15.,  35.,  20.],
       [ 69.,  72.,  82.,  69.,  66.,  62.,  73.,   7.],
       [ 84., 129., 144., 122., 118., 130., 112.,  31.],
       [ 31.,  80.,  92.,  60.,  52.,  50.,  46.,  31.],
       [ 36.,  98., 123.,  84.,  81.,  72.,  73.,  39.],
       [ 47., 140., 163., 147., 173., 155.,  98.,   8.],
       [ 58.,  52.,  45.,  53.,  74.,  54.,  67.,  46.],
       [ 32.,  43.,  15.,  51.,  44.,  31.,  62.,  55.],
       [ 67.,  72.,  54.,  77.,  69.,  72., 126.,  58.]])
Coordinates:
  * year       (year) int32 164B 1983 1984 1985 1986 ... 2020 2021 2022 2023
  * record_id  (record_id) int64 64B 52 60 552 59 57 61 58 50</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.DataArray</div><div class='xr-array-name'></div><ul class='xr-dim-list'><li><span class='xr-has-index'>year</span>: 41</li><li><span class='xr-has-index'>record_id</span>: 8</li></ul></div><ul class='xr-sections'><li class='xr-section-item'><div class='xr-array-wrap'><input id='section-04f49c39-1533-48bf-8547-14933167c31b' class='xr-array-in' type='checkbox' checked><label for='section-04f49c39-1533-48bf-8547-14933167c31b' title='Show/hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-array-preview xr-preview'><span>37.0 30.0 0.0 19.0 13.0 16.0 19.0 ... 54.0 77.0 69.0 72.0 126.0 58.0</span></div><div class='xr-array-data'><pre>array([[ 37.,  30.,   0.,  19.,  13.,  16.,  19.,   9.],
       [ 36.,  40.,   0.,  41.,  61.,  51.,  43.,  13.],
       [ 14.,  14.,   0.,  27.,  25.,  24.,  48.,   5.],
       [ 15.,  11.,   0.,   4.,   5.,   3.,   6.,  16.],
       [ 12.,  33.,   0.,  27.,  17.,  13.,   6.,  12.],
       [ 53.,  32.,   0.,  77.,  61.,  59.,  51.,   7.],
       [ 22.,  17.,   3.,   9.,  19.,  20.,  21.,   6.],
       [ 12.,   6.,   1.,   7.,   3.,  10.,  21.,   4.],
       [ 11.,  23.,   3.,  21.,  23.,   8.,  24.,   2.],
       [ 33.,  38.,   0.,  42.,  30.,  37.,  29.,   8.],
       [ 19.,  39.,   3.,  28.,   8.,  17.,  25.,  11.],
       [ 24.,   4.,   0.,  16.,  15.,   9.,  13.,   2.],
       [ 31.,  14.,   2.,  35.,  42.,  35.,  25.,  13.],
       [ 49.,  43.,   3.,  47.,  34.,  34.,  36.,   8.],
       [ 21.,  29.,   1.,  16.,  11.,  14.,  12.,   4.],
       [ 30.,   9.,   0.,   5.,   1.,   4.,   0.,  29.],
       [ 22.,  15.,   4.,  16.,  11.,   8.,  11.,   8.],
       [  4.,   3.,   0.,  13.,   7.,   7.,   6.,  14.],
       [ 44.,  29.,  10.,  33.,  19.,  25.,   7.,  10.],
       [ 27.,  22.,   0.,  15.,   7.,   6.,  10.,   9.],
...
       [ 23.,  91.,  33.,  87.,  76.,  85.,  37.,  27.],
       [  0.,  53.,  13.,  61.,  43.,  42.,  31.,  16.],
       [  0.,  46.,  31.,  79.,  67.,  73.,  63.,  10.],
       [  0.,  45.,  56.,  49.,  43.,  57.,  30.,  12.],
       [ 25.,  36.,  53.,  42.,  44.,  37.,  43.,  18.],
       [  4.,  30.,  30.,  21.,  13.,  15.,  11.,  28.],
       [ 54.,  38.,  48.,  41.,  31.,  38.,  29.,  38.],
       [ 63.,  20.,  32.,  32.,  17.,  21.,  21.,  11.],
       [ 31.,   7.,  12.,  11.,   8.,   8.,  16.,  69.],
       [ 41.,  18.,  30.,  29.,  14.,  17.,  35.,  35.],
       [ 20.,  49.,  49.,  47.,  29.,  35.,  46.,  44.],
       [ 32.,  46.,  63.,  42.,  12.,  15.,  35.,  20.],
       [ 69.,  72.,  82.,  69.,  66.,  62.,  73.,   7.],
       [ 84., 129., 144., 122., 118., 130., 112.,  31.],
       [ 31.,  80.,  92.,  60.,  52.,  50.,  46.,  31.],
       [ 36.,  98., 123.,  84.,  81.,  72.,  73.,  39.],
       [ 47., 140., 163., 147., 173., 155.,  98.,   8.],
       [ 58.,  52.,  45.,  53.,  74.,  54.,  67.,  46.],
       [ 32.,  43.,  15.,  51.,  44.,  31.,  62.,  55.],
       [ 67.,  72.,  54.,  77.,  69.,  72., 126.,  58.]])</pre></div></div></li><li class='xr-section-item'><input id='section-b2f358b6-d4e6-4f07-81dc-5db8e1414092' class='xr-section-summary-in' type='checkbox'  checked><label for='section-b2f358b6-d4e6-4f07-81dc-5db8e1414092' class='xr-section-summary' >Coordinates: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>year</span></div><div class='xr-var-dims'>(year)</div><div class='xr-var-dtype'>int32</div><div class='xr-var-preview xr-preview'>1983 1984 1985 ... 2021 2022 2023</div><input id='attrs-c383fd9b-0980-44fa-aad2-9d04df23f1c2' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-c383fd9b-0980-44fa-aad2-9d04df23f1c2' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-df06d606-ed10-4955-aa85-34d565c64abd' class='xr-var-data-in' type='checkbox'><label for='data-df06d606-ed10-4955-aa85-34d565c64abd' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994,
       1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006,
       2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017, 2018,
       2019, 2020, 2021, 2022, 2023], dtype=int32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>record_id</span></div><div class='xr-var-dims'>(record_id)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>52 60 552 59 57 61 58 50</div><input id='attrs-ff1fbe93-faa6-4766-a82f-bebca58d5362' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-ff1fbe93-faa6-4766-a82f-bebca58d5362' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-e7272a21-78ad-4e5d-877e-20f5c36467eb' class='xr-var-data-in' type='checkbox'><label for='data-e7272a21-78ad-4e5d-877e-20f5c36467eb' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([ 52,  60, 552,  59,  57,  61,  58,  50])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-38e507b2-9e3f-4c6e-9dad-509381b8d75a' class='xr-section-summary-in' type='checkbox'  ><label for='section-38e507b2-9e3f-4c6e-9dad-509381b8d75a' class='xr-section-summary' >Indexes: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>year</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-4401e27d-0bed-4287-a51c-b5cdfdfa7644' class='xr-index-data-in' type='checkbox'/><label for='index-4401e27d-0bed-4287-a51c-b5cdfdfa7644' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994,
       1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006,
       2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017, 2018,
       2019, 2020, 2021, 2022, 2023],
      dtype=&#x27;int32&#x27;, name=&#x27;year&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>record_id</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-fe294222-502a-466a-ace9-c591dbd03233' class='xr-index-data-in' type='checkbox'/><label for='index-fe294222-502a-466a-ace9-c591dbd03233' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([52, 60, 552, 59, 57, 61, 58, 50], dtype=&#x27;int64&#x27;, name=&#x27;record_id&#x27;))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-8550326f-7b0c-4961-a0e4-b6d99db9ade7' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-8550326f-7b0c-4961-a0e4-b6d99db9ade7' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">flood_hour</span> <span class="o">=</span> <span class="p">(</span><span class="n">hourly_data</span><span class="o">.</span><span class="n">sea_level_MHHW</span><span class="o">.</span><span class="n">values</span> <span class="o">&gt;</span> <span class="n">thresholds</span><span class="p">[:,</span><span class="kc">None</span><span class="p">])</span>
<span class="n">flood_hour</span>

<span class="c1"># flip the array so that the first dimension is time</span>
<span class="n">flood_hour</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="n">flood_hour</span><span class="p">)</span>


<span class="c1"># Add the &#39;flood_day&#39; variable to the dataset</span>
<span class="n">hourly_data</span><span class="p">[</span><span class="s1">&#39;flood_hour&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">((</span><span class="s1">&#39;time&#39;</span><span class="p">,</span> <span class="s1">&#39;record_id&#39;</span><span class="p">),</span> <span class="n">flood_hour</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
<span class="c1"># Filtering for flood days again now that &#39;flood_hour&#39; has been correctly added</span>
<span class="n">flood_hours_data</span> <span class="o">=</span> <span class="n">hourly_data</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">hourly_data</span><span class="o">.</span><span class="n">flood_hour</span><span class="p">,</span> <span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1"># Initialize an empty DataFrame again for the loop</span>
<span class="n">flood_hours_per_year</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
<span class="k">for</span> <span class="n">record_id</span> <span class="ow">in</span> <span class="n">hourly_data</span><span class="o">.</span><span class="n">record_id</span><span class="o">.</span><span class="n">values</span><span class="p">:</span>
    <span class="c1"># Extracting flood days for each record_id</span>
    <span class="n">flood_hours_df</span> <span class="o">=</span> <span class="n">flood_hours_data</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">record_id</span><span class="o">=</span><span class="n">record_id</span><span class="p">)</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">dim</span><span class="o">=</span><span class="s1">&#39;time&#39;</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">to_dataframe</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
  
    <span class="c1"># Extract year from the &#39;time&#39; column and count flood days</span>
    <span class="n">flood_hours_df</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">flood_hours_df</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">year</span>
    <span class="n">flood_hours_count</span> <span class="o">=</span> <span class="n">flood_hours_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;year&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">record_id</span><span class="p">)</span>
  
    <span class="c1"># Merge this count with the main DataFrame</span>
    <span class="k">if</span> <span class="n">flood_hours_per_year</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
        <span class="n">flood_hours_per_year</span> <span class="o">=</span> <span class="n">flood_hours_count</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;year&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">flood_hours_per_year</span> <span class="o">=</span> <span class="n">flood_hours_per_year</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">flood_hours_count</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;year&#39;</span><span class="p">),</span> <span class="n">how</span><span class="o">=</span><span class="s1">&#39;outer&#39;</span><span class="p">)</span>
<span class="c1"># Replace missing values with 0</span>
<span class="n">flood_hours_per_year</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">flood_hours_per_year</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">DataArray</span><span class="p">(</span><span class="n">flood_hours_per_year</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">dims</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="s1">&#39;record_id&#39;</span><span class="p">),</span> <span class="n">coords</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;year&#39;</span><span class="p">:</span> <span class="n">flood_hours_per_year</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;record_id&#39;</span><span class="p">:</span> <span class="n">flood_hours_per_year</span><span class="o">.</span><span class="n">columns</span><span class="p">})</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#make new xarray dataset with attributes from SL_daily_max</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">Dataset</span><span class="p">()</span>

<span class="n">ds</span><span class="p">[</span><span class="s1">&#39;flood_hours_per_year&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">((</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="s1">&#39;record_id&#39;</span><span class="p">),</span> <span class="n">flood_hours_per_year</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>

<span class="n">ds</span><span class="p">[</span><span class="s1">&#39;flood_days_per_year&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">((</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="s1">&#39;record_id&#39;</span><span class="p">),</span> <span class="n">flood_days_per_year</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>

<span class="n">ds</span><span class="p">[</span><span class="s1">&#39;flood_days_per_year&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">attrs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;long_name&#39;</span><span class="p">:</span> <span class="s1">&#39;Number of flood days per year&#39;</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;days&#39;</span><span class="p">}</span>
<span class="n">ds</span><span class="p">[</span><span class="s1">&#39;flood_hours_per_year&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">attrs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;long_name&#39;</span><span class="p">:</span> <span class="s1">&#39;Number of flood hours per year&#39;</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;hours&#39;</span><span class="p">}</span>

<span class="c1"># set year and record_id as coordinates</span>
<span class="n">ds</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">flood_hours_per_year</span><span class="o">.</span><span class="n">year</span>
<span class="n">ds</span><span class="p">[</span><span class="s1">&#39;record_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">flood_hours_per_year</span><span class="o">.</span><span class="n">record_id</span>

<span class="n">ds</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">attrs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;long_name&#39;</span><span class="p">:</span> <span class="s1">&#39;Year&#39;</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;calendar year&#39;</span><span class="p">}</span>
<span class="n">ds</span><span class="p">[</span><span class="s1">&#39;record_id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">attrs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;long_name&#39;</span><span class="p">:</span> <span class="s1">&#39;Record ID&#39;</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;1&#39;</span><span class="p">}</span>


<span class="n">ds</span><span class="p">[</span><span class="s1">&#39;lat&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">SL_daily_max</span><span class="p">[</span><span class="s1">&#39;lat&#39;</span><span class="p">]</span>
<span class="n">ds</span><span class="p">[</span><span class="s1">&#39;lat&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">attrs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;long_name&#39;</span><span class="p">:</span> <span class="s1">&#39;Latitude&#39;</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;degrees_north&#39;</span><span class="p">}</span>

<span class="n">ds</span><span class="p">[</span><span class="s1">&#39;lon&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">SL_daily_max</span><span class="p">[</span><span class="s1">&#39;lon&#39;</span><span class="p">]</span>
<span class="n">ds</span><span class="p">[</span><span class="s1">&#39;lon&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">attrs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;long_name&#39;</span><span class="p">:</span> <span class="s1">&#39;Longitude&#39;</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;degrees_east&#39;</span><span class="p">}</span>

<span class="n">ds</span><span class="p">[</span><span class="s1">&#39;station_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">SL_daily_max</span><span class="p">[</span><span class="s1">&#39;station_name&#39;</span><span class="p">]</span>
<span class="n">ds</span><span class="p">[</span><span class="s1">&#39;station_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">attrs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;long_name&#39;</span><span class="p">:</span> <span class="s1">&#39;Station Name&#39;</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;1&#39;</span><span class="p">}</span>

<span class="n">ds</span><span class="p">[</span><span class="s1">&#39;station_country&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">SL_daily_max</span><span class="p">[</span><span class="s1">&#39;station_country&#39;</span><span class="p">]</span>
<span class="n">ds</span><span class="p">[</span><span class="s1">&#39;station_country&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">attrs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;long_name&#39;</span><span class="p">:</span> <span class="s1">&#39;Station Country&#39;</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;1&#39;</span><span class="p">}</span>

<span class="n">ds</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt; Size: 7kB
Dimensions:               (year: 41, record_id: 8)
Coordinates:
  * year                  (year) int32 164B 1983 1984 1985 ... 2021 2022 2023
  * record_id             (record_id) int64 64B 52 60 552 59 57 61 58 50
Data variables:
    flood_hours_per_year  (year, record_id) float64 3kB 71.0 56.0 ... 221.0
    flood_days_per_year   (year, record_id) float64 3kB 37.0 30.0 ... 126.0 58.0
    lat                   (record_id) float32 32B ...
    lon                   (record_id) float32 32B ...
    station_name          (record_id) &lt;U16 512B &#x27;Johnston&#x27; ... &#x27;Midway&#x27;
    station_country       (record_id) &lt;U30 960B ...</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-5f0c5891-38f3-4f52-be97-680e4ea37d94' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-5f0c5891-38f3-4f52-be97-680e4ea37d94' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>year</span>: 41</li><li><span class='xr-has-index'>record_id</span>: 8</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-43f16bcc-5c0c-4afc-8b2b-08afd5d99dd7' class='xr-section-summary-in' type='checkbox'  checked><label for='section-43f16bcc-5c0c-4afc-8b2b-08afd5d99dd7' class='xr-section-summary' >Coordinates: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>year</span></div><div class='xr-var-dims'>(year)</div><div class='xr-var-dtype'>int32</div><div class='xr-var-preview xr-preview'>1983 1984 1985 ... 2021 2022 2023</div><input id='attrs-f639eb35-1956-43c6-bbfc-449b2d41f02b' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-f639eb35-1956-43c6-bbfc-449b2d41f02b' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-88102d6d-823d-4747-a81f-09e8a282b256' class='xr-var-data-in' type='checkbox'><label for='data-88102d6d-823d-4747-a81f-09e8a282b256' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Year</dd><dt><span>units :</span></dt><dd>calendar year</dd></dl></div><div class='xr-var-data'><pre>array([1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994,
       1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006,
       2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017, 2018,
       2019, 2020, 2021, 2022, 2023], dtype=int32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>record_id</span></div><div class='xr-var-dims'>(record_id)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>52 60 552 59 57 61 58 50</div><input id='attrs-cd66d49e-f21d-4ee3-a03d-8997b0c352db' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-cd66d49e-f21d-4ee3-a03d-8997b0c352db' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-10f969a9-77d6-4935-8c9c-874799cff73b' class='xr-var-data-in' type='checkbox'><label for='data-10f969a9-77d6-4935-8c9c-874799cff73b' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([ 52,  60, 552,  59,  57,  61,  58,  50])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-16af4615-305c-48be-9785-7e522bbf9335' class='xr-section-summary-in' type='checkbox'  checked><label for='section-16af4615-305c-48be-9785-7e522bbf9335' class='xr-section-summary' >Data variables: <span>(6)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>flood_hours_per_year</span></div><div class='xr-var-dims'>(year, record_id)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>71.0 56.0 0.0 ... 169.0 374.0 221.0</div><input id='attrs-429079ae-3528-419b-9c21-5e1748a9ceae' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-429079ae-3528-419b-9c21-5e1748a9ceae' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-4afea48b-20db-43f0-8648-5e97c9d5f84f' class='xr-var-data-in' type='checkbox'><label for='data-4afea48b-20db-43f0-8648-5e97c9d5f84f' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Number of flood hours per year</dd><dt><span>units :</span></dt><dd>hours</dd></dl></div><div class='xr-var-data'><pre>array([[ 71.,  56.,   0.,  35.,  28.,  26.,  32.,  19.],
       [ 75.,  73.,   0.,  70., 115., 102.,  97.,  77.],
       [ 25.,  19.,   0.,  39.,  53.,  54., 128.,  17.],
       [ 40.,  21.,   0.,   7.,   8.,   6.,  11.,  83.],
       [ 25.,  69.,   0.,  57.,  38.,  27.,  17.,  48.],
       [109.,  67.,   0., 145., 117., 113., 114.,  26.],
       [ 44.,  25.,   4.,  16.,  33.,  36.,  35.,  47.],
       [ 20.,  12.,   1.,  10.,   4.,  15.,  41.,  12.],
       [ 16.,  50.,   5.,  31.,  46.,  18.,  49.,   4.],
       [ 62.,  78.,   0.,  74.,  63.,  78.,  52.,  46.],
       [ 35.,  75.,   6.,  52.,  17.,  34.,  45.,  19.],
       [ 78.,   4.,   0.,  19.,  24.,  14.,  24.,  15.],
       [ 76.,  22.,   2.,  72., 105.,  82.,  57.,  46.],
       [124.,  81.,   5.,  82.,  68.,  71.,  68.,  44.],
       [ 46.,  53.,   2.,  24.,  16.,  16.,  20.,   7.],
       [ 60.,  15.,   0.,   6.,   1.,   6.,   0., 156.],
       [ 48.,  27.,   5.,  25.,  22.,  15.,  20.,  31.],
       [  4.,   5.,   0.,  21.,  14.,  13.,   9.,  53.],
       [ 98.,  63.,  17.,  65.,  29.,  45.,  11.,  46.],
       [ 48.,  36.,   0.,  25.,  13.,  11.,  18.,  21.],
...
       [ 53., 196.,  68., 163., 180., 206.,  74., 218.],
       [  0., 109.,  23., 110.,  83.,  83.,  74., 108.],
       [  0.,  88.,  70., 158., 145., 156., 164.,  30.],
       [  0.,  84., 127.,  96.,  88., 114.,  66.,  53.],
       [ 52.,  75., 125.,  95., 106.,  84.,  94.,  68.],
       [  6.,  57.,  58.,  38.,  25.,  27.,  24.,  81.],
       [137.,  73.,  94.,  70.,  64.,  72.,  61., 140.],
       [188.,  35.,  57.,  53.,  24.,  30.,  38.,  91.],
       [ 75.,  13.,  22.,  17.,  15.,  16.,  22., 289.],
       [ 84.,  32.,  60.,  46.,  23.,  29.,  70., 122.],
       [ 49.,  99., 102.,  86.,  55.,  67.,  92., 155.],
       [ 91.,  76., 125.,  66.,  14.,  22.,  93.,  92.],
       [196., 171., 198., 133., 145., 150., 166.,  33.],
       [240., 289., 359., 288., 308., 301., 269., 133.],
       [ 67., 178., 209., 118., 124., 121., 109., 120.],
       [ 95., 255., 331., 190., 212., 206., 181., 146.],
       [105., 365., 510., 386., 496., 440., 271.,  24.],
       [136., 126., 123., 110., 169., 128., 163., 157.],
       [ 81.,  81.,  26.,  93.,  82.,  67., 130., 249.],
       [187., 164., 106., 173., 151., 169., 374., 221.]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>flood_days_per_year</span></div><div class='xr-var-dims'>(year, record_id)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>37.0 30.0 0.0 ... 72.0 126.0 58.0</div><input id='attrs-bf8bf8e8-ddda-49ce-b3f0-38bb27086917' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-bf8bf8e8-ddda-49ce-b3f0-38bb27086917' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-1bf76f26-1abc-46bc-af2c-d262f59be6a9' class='xr-var-data-in' type='checkbox'><label for='data-1bf76f26-1abc-46bc-af2c-d262f59be6a9' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Number of flood days per year</dd><dt><span>units :</span></dt><dd>days</dd></dl></div><div class='xr-var-data'><pre>array([[ 37.,  30.,   0.,  19.,  13.,  16.,  19.,   9.],
       [ 36.,  40.,   0.,  41.,  61.,  51.,  43.,  13.],
       [ 14.,  14.,   0.,  27.,  25.,  24.,  48.,   5.],
       [ 15.,  11.,   0.,   4.,   5.,   3.,   6.,  16.],
       [ 12.,  33.,   0.,  27.,  17.,  13.,   6.,  12.],
       [ 53.,  32.,   0.,  77.,  61.,  59.,  51.,   7.],
       [ 22.,  17.,   3.,   9.,  19.,  20.,  21.,   6.],
       [ 12.,   6.,   1.,   7.,   3.,  10.,  21.,   4.],
       [ 11.,  23.,   3.,  21.,  23.,   8.,  24.,   2.],
       [ 33.,  38.,   0.,  42.,  30.,  37.,  29.,   8.],
       [ 19.,  39.,   3.,  28.,   8.,  17.,  25.,  11.],
       [ 24.,   4.,   0.,  16.,  15.,   9.,  13.,   2.],
       [ 31.,  14.,   2.,  35.,  42.,  35.,  25.,  13.],
       [ 49.,  43.,   3.,  47.,  34.,  34.,  36.,   8.],
       [ 21.,  29.,   1.,  16.,  11.,  14.,  12.,   4.],
       [ 30.,   9.,   0.,   5.,   1.,   4.,   0.,  29.],
       [ 22.,  15.,   4.,  16.,  11.,   8.,  11.,   8.],
       [  4.,   3.,   0.,  13.,   7.,   7.,   6.,  14.],
       [ 44.,  29.,  10.,  33.,  19.,  25.,   7.,  10.],
       [ 27.,  22.,   0.,  15.,   7.,   6.,  10.,   9.],
...
       [ 23.,  91.,  33.,  87.,  76.,  85.,  37.,  27.],
       [  0.,  53.,  13.,  61.,  43.,  42.,  31.,  16.],
       [  0.,  46.,  31.,  79.,  67.,  73.,  63.,  10.],
       [  0.,  45.,  56.,  49.,  43.,  57.,  30.,  12.],
       [ 25.,  36.,  53.,  42.,  44.,  37.,  43.,  18.],
       [  4.,  30.,  30.,  21.,  13.,  15.,  11.,  28.],
       [ 54.,  38.,  48.,  41.,  31.,  38.,  29.,  38.],
       [ 63.,  20.,  32.,  32.,  17.,  21.,  21.,  11.],
       [ 31.,   7.,  12.,  11.,   8.,   8.,  16.,  69.],
       [ 41.,  18.,  30.,  29.,  14.,  17.,  35.,  35.],
       [ 20.,  49.,  49.,  47.,  29.,  35.,  46.,  44.],
       [ 32.,  46.,  63.,  42.,  12.,  15.,  35.,  20.],
       [ 69.,  72.,  82.,  69.,  66.,  62.,  73.,   7.],
       [ 84., 129., 144., 122., 118., 130., 112.,  31.],
       [ 31.,  80.,  92.,  60.,  52.,  50.,  46.,  31.],
       [ 36.,  98., 123.,  84.,  81.,  72.,  73.,  39.],
       [ 47., 140., 163., 147., 173., 155.,  98.,   8.],
       [ 58.,  52.,  45.,  53.,  74.,  54.,  67.,  46.],
       [ 32.,  43.,  15.,  51.,  44.,  31.,  62.,  55.],
       [ 67.,  72.,  54.,  77.,  69.,  72., 126.,  58.]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>lat</span></div><div class='xr-var-dims'>(record_id)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-54ea53e3-f56d-4854-8238-fa0938da1653' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-54ea53e3-f56d-4854-8238-fa0938da1653' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-ee77a88f-69b3-44ca-bae3-2256a192eb0b' class='xr-var-data-in' type='checkbox'><label for='data-ee77a88f-69b3-44ca-bae3-2256a192eb0b' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Latitude</dd><dt><span>units :</span></dt><dd>degrees_north</dd></dl></div><div class='xr-var-data'><pre>[8 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>lon</span></div><div class='xr-var-dims'>(record_id)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-3239dd98-6824-43fc-8578-4d19b0c0cb23' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-3239dd98-6824-43fc-8578-4d19b0c0cb23' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-9b89eb0d-27b0-43a2-a91e-2d8ddc0b7726' class='xr-var-data-in' type='checkbox'><label for='data-9b89eb0d-27b0-43a2-a91e-2d8ddc0b7726' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Longitude</dd><dt><span>units :</span></dt><dd>degrees_east</dd></dl></div><div class='xr-var-data'><pre>[8 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>station_name</span></div><div class='xr-var-dims'>(record_id)</div><div class='xr-var-dtype'>&lt;U16</div><div class='xr-var-preview xr-preview'>&#x27;Johnston&#x27; ... &#x27;Midway&#x27;</div><input id='attrs-0fddd003-d56c-45e9-9cef-50b13c679e5e' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-0fddd003-d56c-45e9-9cef-50b13c679e5e' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-fdb4ab28-b4f0-4bbf-90d5-0cf3d3bf7691' class='xr-var-data-in' type='checkbox'><label for='data-fdb4ab28-b4f0-4bbf-90d5-0cf3d3bf7691' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Station Name</dd><dt><span>units :</span></dt><dd>1</dd></dl></div><div class='xr-var-data'><pre>array([&#x27;Johnston&#x27;, &#x27;Hilo, Hawaii&#x27;, &#x27;Kawaihae&#x27;, &#x27;Kahului&#x27;, &#x27;Honolulu, Hawaii&#x27;,
       &#x27;Mokuoloe&#x27;, &#x27;Nawiliwili&#x27;, &#x27;Midway&#x27;], dtype=&#x27;&lt;U16&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>station_country</span></div><div class='xr-var-dims'>(record_id)</div><div class='xr-var-dtype'>&lt;U30</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-c84047f6-c8fd-41bc-9484-bedc3ac3edb0' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-c84047f6-c8fd-41bc-9484-bedc3ac3edb0' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-d56251ed-2bc6-4061-a3af-0e46b4ef0067' class='xr-var-data-in' type='checkbox'><label for='data-d56251ed-2bc6-4061-a3af-0e46b4ef0067' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Station Country</dd><dt><span>units :</span></dt><dd>1</dd></dl></div><div class='xr-var-data'><pre>[8 values with dtype=&lt;U30]</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-ceadd6b3-8658-471f-b224-4f1c77afa030' class='xr-section-summary-in' type='checkbox'  ><label for='section-ceadd6b3-8658-471f-b224-4f1c77afa030' class='xr-section-summary' >Indexes: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>year</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-dcd46d32-bbf3-4c89-9ddf-da68f39fd90d' class='xr-index-data-in' type='checkbox'/><label for='index-dcd46d32-bbf3-4c89-9ddf-da68f39fd90d' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994,
       1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006,
       2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017, 2018,
       2019, 2020, 2021, 2022, 2023],
      dtype=&#x27;int32&#x27;, name=&#x27;year&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>record_id</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-41d6285f-d37d-4c3f-bd0c-9220e39b324c' class='xr-index-data-in' type='checkbox'/><label for='index-41d6285f-d37d-4c3f-bd0c-9220e39b324c' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([52, 60, 552, 59, 57, 61, 58, 50], dtype=&#x27;int64&#x27;, name=&#x27;record_id&#x27;))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-df930b61-4f31-48ba-9a73-a4a2e871b808' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-df930b61-4f31-48ba-9a73-a4a2e871b808' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#find minimum value in flood_days_per_year</span>
<span class="n">min_flood_days</span> <span class="o">=</span> <span class="n">flood_days_per_year</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
<span class="n">max_flood_days</span> <span class="o">=</span> <span class="n">flood_days_per_year</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="plot-flood-frequency-counts">
<h3>Plot Flood Frequency Counts<a class="headerlink" href="#plot-flood-frequency-counts" title="Permalink to this heading">#</a></h3>
<p>The flood frequency counts are defined as the number of time periods that exceed a given threshold within a year. This plot follows <span id="id1"></span>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Adjusting the heatmap palette to improve readability</span>
<span class="n">adjusted_heatmap_palette</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">(</span><span class="s2">&quot;YlOrRd&quot;</span><span class="p">,</span> <span class="n">as_cmap</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">rid</span> <span class="o">=</span> <span class="mi">57</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">ds</span><span class="p">[</span><span class="s1">&#39;flood_days_per_year&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">record_id</span><span class="o">=</span><span class="n">rid</span><span class="p">)</span><span class="o">.</span><span class="n">to_dataframe</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>

<span class="n">norm</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">Normalize</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;flood_days_per_year&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;flood_days_per_year&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">())</span>
<span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="n">adjusted_heatmap_palette</span><span class="p">(</span><span class="n">norm</span><span class="p">(</span><span class="n">value</span><span class="p">))</span> <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;flood_days_per_year&#39;</span><span class="p">]]</span>


<span class="c1"># Plotting with the adjusted settings</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>


<span class="n">bars</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> 
    <span class="n">y</span><span class="o">=</span><span class="s1">&#39;flood_days_per_year&#39;</span><span class="p">,</span> 
    <span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span>
    <span class="n">dodge</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">legend</span><span class="o">=</span><span class="kc">False</span>
<span class="p">)</span>

<span class="k">for</span> <span class="n">bar</span><span class="p">,</span> <span class="n">color</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">bars</span><span class="o">.</span><span class="n">patches</span><span class="p">,</span> <span class="n">colors</span><span class="p">):</span>
    <span class="n">bar</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
   
<span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">),</span> <span class="mi">5</span><span class="p">))</span>  <span class="c1"># Setting x-ticks to show every 5th year</span>
<span class="n">year_ticks</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">][::</span><span class="mi">5</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>  <span class="c1"># Selecting every 5th year for the x-axis</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">year_ticks</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="mi">45</span><span class="p">)</span>

<span class="c1"># Adding a light gray grid</span>
<span class="n">station_name</span> <span class="o">=</span> <span class="n">ds</span><span class="p">[</span><span class="s1">&#39;station_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">record_id</span><span class="o">=</span><span class="n">rid</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">item</span><span class="p">()</span>

<span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">,</span> <span class="n">station_name</span> <span class="o">+</span> <span class="s1">&#39; above &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">threshold</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; cm threshold&#39;</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">transAxes</span><span class="p">)</span>

<span class="c1">#save the figure</span>
<span class="n">figname</span> <span class="o">=</span> <span class="s1">&#39;SL_FloodFrequency_threshold_counts_&#39;</span><span class="o">+</span><span class="n">station_name</span><span class="o">+</span><span class="s1">&#39;.png&#39;</span>
<span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">output_dir</span> <span class="o">/</span> <span class="n">figname</span><span class="p">,</span> <span class="n">bbox_inches</span><span class="o">=</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/854e8407957a45640dbb23f862a2f49c23c07825b5f971d02032f3475830c02d.png" src="../_images/854e8407957a45640dbb23f862a2f49c23c07825b5f971d02032f3475830c02d.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Adjusting the heatmap palette to improve readability</span>
<span class="n">adjusted_heatmap_palette</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">(</span><span class="s2">&quot;YlOrRd&quot;</span><span class="p">,</span> <span class="n">as_cmap</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">rid</span> <span class="o">=</span> <span class="mi">57</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">ds</span><span class="p">[</span><span class="s1">&#39;flood_hours_per_year&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">record_id</span><span class="o">=</span><span class="n">rid</span><span class="p">)</span><span class="o">.</span><span class="n">to_dataframe</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>

<span class="n">norm</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">Normalize</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;flood_hours_per_year&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;flood_hours_per_year&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">())</span>
<span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="n">adjusted_heatmap_palette</span><span class="p">(</span><span class="n">norm</span><span class="p">(</span><span class="n">value</span><span class="p">))</span> <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;flood_hours_per_year&#39;</span><span class="p">]]</span>


<span class="c1"># Plotting with the adjusted settings</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>


<span class="n">bars</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> 
    <span class="n">y</span><span class="o">=</span><span class="s1">&#39;flood_hours_per_year&#39;</span><span class="p">,</span> 
    <span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span>
    <span class="n">dodge</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">legend</span><span class="o">=</span><span class="kc">False</span>
<span class="p">)</span>

<span class="k">for</span> <span class="n">bar</span><span class="p">,</span> <span class="n">color</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">bars</span><span class="o">.</span><span class="n">patches</span><span class="p">,</span> <span class="n">colors</span><span class="p">):</span>
    <span class="n">bar</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">),</span> <span class="mi">5</span><span class="p">))</span>  <span class="c1"># Setting x-ticks to show every 5th year</span>
<span class="n">year_ticks</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">][::</span><span class="mi">5</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>  <span class="c1"># Selecting every 5th year for the x-axis</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">year_ticks</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="mi">45</span><span class="p">)</span>

<span class="c1"># Adding a light gray grid</span>
<span class="n">station_name</span> <span class="o">=</span> <span class="n">ds</span><span class="p">[</span><span class="s1">&#39;station_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">record_id</span><span class="o">=</span><span class="n">rid</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">item</span><span class="p">()</span>

<span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">,</span> <span class="n">station_name</span> <span class="o">+</span> <span class="s1">&#39; above &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">threshold</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; cm threshold&#39;</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">transAxes</span><span class="p">)</span>

<span class="c1">#save the figure</span>
<span class="n">figname</span> <span class="o">=</span> <span class="s1">&#39;SL_FloodFrequency_threshold_counts_HOURS_&#39;</span><span class="o">+</span><span class="n">station_name</span><span class="o">+</span><span class="s1">&#39;.png&#39;</span>
<span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">output_dir</span> <span class="o">/</span> <span class="n">figname</span><span class="p">,</span> <span class="n">bbox_inches</span><span class="o">=</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/8699d5a5f52a678a9dcdaa2adf5ea1498ec11880ac2b22f561c4a867eeb8c938.png" src="../_images/8699d5a5f52a678a9dcdaa2adf5ea1498ec11880ac2b22f561c4a867eeb8c938.png" />
</div>
</div>
<div class="cell tag_hide-output docutils container">
<div class="cell_input above-output-prompt docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Adjusting the heatmap palette to improve readability</span>
<span class="n">adjusted_heatmap_palette</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">(</span><span class="s2">&quot;YlOrRd&quot;</span><span class="p">,</span> <span class="n">as_cmap</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">norm</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">Normalize</span><span class="p">(</span><span class="n">flood_days_per_year</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">flood_days_per_year</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">.</span><span class="n">max</span><span class="p">())</span>
<span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="n">adjusted_heatmap_palette</span><span class="p">(</span><span class="n">norm</span><span class="p">(</span><span class="n">value</span><span class="p">))</span> <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">flood_days_per_year</span><span class="o">.</span><span class="n">values</span><span class="p">]</span>

<span class="c1"># do a pcolormesh plot</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">pcolormesh</span><span class="p">(</span><span class="n">ds</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">],</span> <span class="n">ds</span><span class="p">[</span><span class="s1">&#39;station_name&#39;</span><span class="p">],</span> <span class="n">ds</span><span class="p">[</span><span class="s1">&#39;flood_days_per_year&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">adjusted_heatmap_palette</span><span class="p">,</span> <span class="n">norm</span><span class="o">=</span><span class="n">norm</span><span class="p">)</span>

<span class="c1"># add a colorbar</span>
<span class="n">cax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_axes</span><span class="p">([</span><span class="mf">0.92</span><span class="p">,</span> <span class="mf">0.15</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">])</span>  <span class="c1"># adjust the position and size of the colorbar</span>
<span class="n">sm</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">cm</span><span class="o">.</span><span class="n">ScalarMappable</span><span class="p">(</span><span class="n">cmap</span><span class="o">=</span><span class="n">adjusted_heatmap_palette</span><span class="p">,</span> <span class="n">norm</span><span class="o">=</span><span class="n">norm</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">sm</span><span class="p">,</span> <span class="n">cax</span><span class="o">=</span><span class="n">cax</span><span class="p">,</span><span class="n">label</span><span class="o">=</span> <span class="s1">&#39;Number of Flood Days&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Year&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Number of Flood Days Per Year&#39;</span><span class="p">)</span>             

<span class="n">glue</span><span class="p">(</span><span class="s2">&quot;threshold_counts_days_fig&quot;</span><span class="p">,</span> <span class="n">fig</span><span class="p">,</span> <span class="n">display</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># save the figure</span>
<span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">output_dir</span> <span class="o">/</span> <span class="s1">&#39;SL_FloodFrequency_threshold_counts_days.png&#39;</span><span class="p">,</span> <span class="n">bbox_inches</span><span class="o">=</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<details class="hide below-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell output</span>
<span class="expanded">Hide code cell output</span>
</summary>
<div class="cell_output docutils container">
<img alt="../_images/d4d9009f81887fbb93bf22c8fa0e3cd3567be58f76b5e9313d693212f257ad45.png" src="../_images/d4d9009f81887fbb93bf22c8fa0e3cd3567be58f76b5e9313d693212f257ad45.png" />
</div>
</details>
</div>
<figure class="align-default" id="fig-threshold-counts">
<img alt="../_images/d4d9009f81887fbb93bf22c8fa0e3cd3567be58f76b5e9313d693212f257ad45.png" src="../_images/d4d9009f81887fbb93bf22c8fa0e3cd3567be58f76b5e9313d693212f257ad45.png" />
<figcaption>
<p><span class="caption-number">Fig. 12 </span><span class="caption-text">Flood frequency counts above <span class="pasted-text">99.000</span>th percentile threshold per year at <code class="docutils literal notranslate"><span class="pre">'Hawaiian</span> <span class="pre">Islands'</span></code> tide gauges from  to .</span><a class="headerlink" href="#fig-threshold-counts" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
</section>
<section id="plot-flood-duration">
<h3>Plot Flood Duration<a class="headerlink" href="#plot-flood-duration" title="Permalink to this heading">#</a></h3>
<p>This next plot examines the average duration of flooding events as defined by the threshold.
I have a few issues with this plot being “duration,” as it’s just counts of hours above the threshold. These hours need not be continuous…which to me is what duration is all about. Anyway, we carry on.</p>
<aside class="margin sidebar">
<p class="sidebar-title"></p>
<p>There are some dissimilarities here that give me pause. Going to look into it.</p>
</aside>
<div class="cell tag_hide-output docutils container">
<div class="cell_input above-output-prompt docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Adjusting the heatmap palette to improve readability</span>
<span class="n">adjusted_heatmap_palette</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">(</span><span class="s2">&quot;YlOrRd&quot;</span><span class="p">,</span> <span class="n">as_cmap</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">norm</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">Normalize</span><span class="p">(</span><span class="n">flood_hours_per_year</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">flood_hours_per_year</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">.</span><span class="n">max</span><span class="p">())</span>
<span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="n">adjusted_heatmap_palette</span><span class="p">(</span><span class="n">norm</span><span class="p">(</span><span class="n">value</span><span class="p">))</span> <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">flood_hours_per_year</span><span class="o">.</span><span class="n">values</span><span class="p">]</span>

<span class="c1"># do a pcolormesh plot</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">pcolormesh</span><span class="p">(</span><span class="n">ds</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">],</span> <span class="n">ds</span><span class="p">[</span><span class="s1">&#39;station_name&#39;</span><span class="p">],</span> <span class="n">ds</span><span class="p">[</span><span class="s1">&#39;flood_hours_per_year&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">adjusted_heatmap_palette</span><span class="p">,</span> <span class="n">norm</span><span class="o">=</span><span class="n">norm</span><span class="p">)</span>

<span class="c1"># add a colorbar</span>
<span class="n">cax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_axes</span><span class="p">([</span><span class="mf">0.92</span><span class="p">,</span> <span class="mf">0.15</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">])</span>  <span class="c1"># adjust the position and size of the colorbar</span>
<span class="n">sm</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">cm</span><span class="o">.</span><span class="n">ScalarMappable</span><span class="p">(</span><span class="n">cmap</span><span class="o">=</span><span class="n">adjusted_heatmap_palette</span><span class="p">,</span> <span class="n">norm</span><span class="o">=</span><span class="n">norm</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">sm</span><span class="p">,</span> <span class="n">cax</span><span class="o">=</span><span class="n">cax</span><span class="p">,</span><span class="n">label</span><span class="o">=</span> <span class="s1">&#39;Number of Flood Hours&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Year&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Number of Flood Hours Per Year&#39;</span><span class="p">)</span>             
<span class="c1"># ax.set_yticklabels(SL_daily_max[&#39;station_name&#39;].values[0])</span>

<span class="c1"># save the figure</span>
<span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">output_dir</span> <span class="o">/</span> <span class="s1">&#39;SL_FloodFrequency_threshold_counts_hours.png&#39;</span><span class="p">,</span> <span class="n">bbox_inches</span><span class="o">=</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>



<span class="n">glue</span><span class="p">(</span><span class="s2">&quot;duration_fig&quot;</span><span class="p">,</span> <span class="n">fig</span><span class="p">,</span> <span class="n">display</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<details class="hide below-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell output</span>
<span class="expanded">Hide code cell output</span>
</summary>
<div class="cell_output docutils container">
<img alt="../_images/240f88f9b04efe9686c3a0fd3aa59d45f2f0490ec1c8cc41659c348183b1155e.png" src="../_images/240f88f9b04efe9686c3a0fd3aa59d45f2f0490ec1c8cc41659c348183b1155e.png" />
</div>
</details>
</div>
<figure class="align-default" id="fig-duration">
<img alt="../_images/240f88f9b04efe9686c3a0fd3aa59d45f2f0490ec1c8cc41659c348183b1155e.png" src="../_images/240f88f9b04efe9686c3a0fd3aa59d45f2f0490ec1c8cc41659c348183b1155e.png" />
<figcaption>
<p><span class="caption-number">Fig. 13 </span><span class="caption-text">Average flood duration in hours above a threshold of  cm per year for <code class="docutils literal notranslate"><span class="pre">'Hawaiian</span> <span class="pre">Islands'</span></code> region tide gauges from  to .</span><a class="headerlink" href="#fig-duration" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
</section>
</section>
<section id="calculate-the-percent-change-over-time">
<h2>Calculate the percent change over time<a class="headerlink" href="#calculate-the-percent-change-over-time" title="Permalink to this heading">#</a></h2>
<p>Next we’ll calculate the percent change over the POR at the tide station/s, for both Frequency and Duration.</p>
<p>The next code cell fits a trend line to the flood days per year data and calculates the trend line.
It then plots the data and the trend line in a figure, and calculates the percent change in flood days per year using the trend line. The same process is repeated for flood hours per year.</p>
<div class="cell tag_hide-input docutils container">
<details class="hide above-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell source</span>
<span class="expanded">Hide code cell source</span>
</summary>
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">calculate_flood_trend</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="n">timescale</span> <span class="o">=</span> <span class="s1">&#39;days&#39;</span><span class="p">):</span>

    <span class="k">if</span> <span class="n">timescale</span> <span class="o">==</span> <span class="s1">&#39;days&#39;</span><span class="p">:</span>
        <span class="n">dsvar</span> <span class="o">=</span> <span class="s1">&#39;flood_days_per_year&#39;</span>
    <span class="k">elif</span> <span class="n">timescale</span> <span class="o">==</span> <span class="s1">&#39;hours&#39;</span><span class="p">:</span>
        <span class="n">dsvar</span> <span class="o">=</span> <span class="s1">&#39;flood_hours_per_year&#39;</span>

    <span class="n">slopes</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">intercepts</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">percent_changes</span> <span class="o">=</span> <span class="p">[]</span>
    
    <span class="c1">#trends is an empty array the length of ds[&#39;year&#39;] and the number of records</span>
    <span class="n">trends</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">ds</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]),</span> <span class="nb">len</span><span class="p">(</span><span class="n">ds</span><span class="p">[</span><span class="s1">&#39;record_id&#39;</span><span class="p">])))</span>

    <span class="k">for</span> <span class="n">record_id</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ds</span><span class="p">[</span><span class="s1">&#39;record_id&#39;</span><span class="p">])):</span>
        <span class="n">slope</span><span class="p">,</span> <span class="n">intercept</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">linregress</span><span class="p">(</span><span class="n">ds</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">ds</span><span class="p">[</span><span class="n">dsvar</span><span class="p">]</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">record_id</span><span class="o">=</span><span class="n">record_id</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
        <span class="n">trend</span> <span class="o">=</span> <span class="n">intercept</span> <span class="o">+</span> <span class="n">slope</span> <span class="o">*</span> <span class="n">ds</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">trend</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">percent_change</span> <span class="o">=</span> <span class="n">trend</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:]</span><span class="o">*</span><span class="mi">100</span> <span class="c1">#this needs help, how to define percent change when the first value is less than 0?</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">percent_change</span> <span class="o">=</span> <span class="p">(</span><span class="n">trend</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:]</span> <span class="o">-</span> <span class="n">trend</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">trend</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="mi">100</span>

        <span class="n">slopes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">slope</span><span class="p">)</span>
        <span class="n">intercepts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">intercept</span><span class="p">)</span>
        <span class="n">percent_changes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">percent_change</span><span class="p">)</span>
        <span class="n">trends</span><span class="p">[:,</span> <span class="n">record_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">trend</span>

    <span class="k">return</span> <span class="n">slopes</span><span class="p">,</span> <span class="n">intercepts</span><span class="p">,</span> <span class="n">percent_changes</span><span class="p">,</span> <span class="n">trends</span>

<span class="n">slopes</span><span class="p">,</span> <span class="n">intercepts</span><span class="p">,</span> <span class="n">percent_changes</span><span class="p">,</span> <span class="n">trends</span> <span class="o">=</span> <span class="n">calculate_flood_trend</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="s1">&#39;days&#39;</span><span class="p">)</span>

<span class="c1">#add to dataset</span>
<span class="n">ds</span><span class="p">[</span><span class="s1">&#39;slope_days&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">((</span><span class="s1">&#39;record_id&#39;</span><span class="p">),</span> <span class="n">slopes</span><span class="p">)</span>
<span class="n">ds</span><span class="p">[</span><span class="s1">&#39;intercept_days&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">((</span><span class="s1">&#39;record_id&#39;</span><span class="p">),</span> <span class="n">intercepts</span><span class="p">)</span>
<span class="n">ds</span><span class="p">[</span><span class="s1">&#39;percent_change_days&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">((</span><span class="s1">&#39;record_id&#39;</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">squeeze</span><span class="p">(</span><span class="n">percent_changes</span><span class="p">))</span>
<span class="n">ds</span><span class="p">[</span><span class="s1">&#39;trend_days&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">((</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="s1">&#39;record_id&#39;</span><span class="p">),</span> <span class="n">trends</span><span class="p">)</span>

<span class="n">ds</span><span class="p">[</span><span class="s1">&#39;slope_days&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">attrs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;long_name&#39;</span><span class="p">:</span> <span class="s1">&#39;Slope of the trend line&#39;</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;days/year&#39;</span><span class="p">}</span>
<span class="n">ds</span><span class="p">[</span><span class="s1">&#39;intercept_days&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">attrs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;long_name&#39;</span><span class="p">:</span> <span class="s1">&#39;Intercept of the trend line&#39;</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;days&#39;</span><span class="p">}</span>
<span class="n">ds</span><span class="p">[</span><span class="s1">&#39;percent_change_days&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">attrs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;long_name&#39;</span><span class="p">:</span> <span class="s1">&#39;Percent change in flood days per year&#39;</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;%&#39;</span><span class="p">}</span>
<span class="n">ds</span><span class="p">[</span><span class="s1">&#39;trend_days&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">attrs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;long_name&#39;</span><span class="p">:</span> <span class="s1">&#39;Trend line of flood days per year&#39;</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;days&#39;</span><span class="p">}</span>


<span class="n">slopes</span><span class="p">,</span> <span class="n">intercepts</span><span class="p">,</span> <span class="n">percent_changes</span><span class="p">,</span> <span class="n">trends</span> <span class="o">=</span> <span class="n">calculate_flood_trend</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="s1">&#39;hours&#39;</span><span class="p">)</span>

<span class="c1">#add to dataset</span>
<span class="n">ds</span><span class="p">[</span><span class="s1">&#39;slope_hours&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">((</span><span class="s1">&#39;record_id&#39;</span><span class="p">),</span> <span class="n">slopes</span><span class="p">)</span>
<span class="n">ds</span><span class="p">[</span><span class="s1">&#39;intercept_hours&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">((</span><span class="s1">&#39;record_id&#39;</span><span class="p">),</span> <span class="n">intercepts</span><span class="p">)</span>
<span class="n">ds</span><span class="p">[</span><span class="s1">&#39;percent_change_hours&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">((</span><span class="s1">&#39;record_id&#39;</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">squeeze</span><span class="p">(</span><span class="n">percent_changes</span><span class="p">))</span>
<span class="n">ds</span><span class="p">[</span><span class="s1">&#39;trend_hours&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">((</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="s1">&#39;record_id&#39;</span><span class="p">),</span> <span class="n">trends</span><span class="p">)</span>

<span class="n">ds</span><span class="p">[</span><span class="s1">&#39;slope_hours&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">attrs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;long_name&#39;</span><span class="p">:</span> <span class="s1">&#39;Slope of the trend line&#39;</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;hours/year&#39;</span><span class="p">}</span>
<span class="n">ds</span><span class="p">[</span><span class="s1">&#39;intercept_hours&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">attrs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;long_name&#39;</span><span class="p">:</span> <span class="s1">&#39;Intercept of the trend line&#39;</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;hours&#39;</span><span class="p">}</span>
<span class="n">ds</span><span class="p">[</span><span class="s1">&#39;percent_change_hours&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">attrs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;long_name&#39;</span><span class="p">:</span> <span class="s1">&#39;Percent change in flood hours per year&#39;</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;%&#39;</span><span class="p">}</span>
<span class="n">ds</span><span class="p">[</span><span class="s1">&#39;trend_hours&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">attrs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;long_name&#39;</span><span class="p">:</span> <span class="s1">&#39;Trend line of flood hours per year&#39;</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;hours&#39;</span><span class="p">}</span>

<span class="n">ds</span>
</pre></div>
</div>
</div>
</details>
<div class="cell_output docutils container">
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt; Size: 13kB
Dimensions:               (year: 41, record_id: 8)
Coordinates:
  * year                  (year) int32 164B 1983 1984 1985 ... 2021 2022 2023
  * record_id             (record_id) int64 64B 52 60 552 59 57 61 58 50
Data variables: (12/14)
    flood_hours_per_year  (year, record_id) float64 3kB 71.0 56.0 ... 221.0
    flood_days_per_year   (year, record_id) float64 3kB 37.0 30.0 ... 126.0 58.0
    lat                   (record_id) float32 32B ...
    lon                   (record_id) float32 32B ...
    station_name          (record_id) &lt;U16 512B &#x27;Johnston&#x27; ... &#x27;Midway&#x27;
    station_country       (record_id) &lt;U30 960B ...
    ...                    ...
    percent_change_days   (record_id) float64 64B 151.8 567.1 ... 2.452e+03
    trend_days            (year, record_id) float64 3kB 17.85 10.68 ... 38.68
    slope_hours           (record_id) float64 64B 2.194 3.795 ... 3.883 3.555
    intercept_hours       (record_id) float64 64B -4.318e+03 ... -7.035e+03
    percent_change_hours  (record_id) float64 64B 278.6 1.368e+03 ... 953.2
    trend_hours           (year, record_id) float64 3kB 31.49 11.09 ... 157.1</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-ae7b1478-fba6-4860-8887-70ab2d2faf17' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-ae7b1478-fba6-4860-8887-70ab2d2faf17' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>year</span>: 41</li><li><span class='xr-has-index'>record_id</span>: 8</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-e7faedb3-463c-4844-8dbf-9f01f10e2061' class='xr-section-summary-in' type='checkbox'  checked><label for='section-e7faedb3-463c-4844-8dbf-9f01f10e2061' class='xr-section-summary' >Coordinates: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>year</span></div><div class='xr-var-dims'>(year)</div><div class='xr-var-dtype'>int32</div><div class='xr-var-preview xr-preview'>1983 1984 1985 ... 2021 2022 2023</div><input id='attrs-0c7cd3b7-fff4-4a8f-a1c6-a6ef7a1e9c01' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-0c7cd3b7-fff4-4a8f-a1c6-a6ef7a1e9c01' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-4d7026fd-9aac-4b30-959d-f42e5a6546bf' class='xr-var-data-in' type='checkbox'><label for='data-4d7026fd-9aac-4b30-959d-f42e5a6546bf' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Year</dd><dt><span>units :</span></dt><dd>calendar year</dd></dl></div><div class='xr-var-data'><pre>array([1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994,
       1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006,
       2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017, 2018,
       2019, 2020, 2021, 2022, 2023], dtype=int32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>record_id</span></div><div class='xr-var-dims'>(record_id)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>52 60 552 59 57 61 58 50</div><input id='attrs-f2997acd-382a-47a3-b81f-b8187ceb99c0' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-f2997acd-382a-47a3-b81f-b8187ceb99c0' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-6fa2d265-3ce7-4f96-adb5-767fc0bcd790' class='xr-var-data-in' type='checkbox'><label for='data-6fa2d265-3ce7-4f96-adb5-767fc0bcd790' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([ 52,  60, 552,  59,  57,  61,  58,  50])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-0ba9ecad-8976-4041-9288-a89bc225b358' class='xr-section-summary-in' type='checkbox'  checked><label for='section-0ba9ecad-8976-4041-9288-a89bc225b358' class='xr-section-summary' >Data variables: <span>(14)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>flood_hours_per_year</span></div><div class='xr-var-dims'>(year, record_id)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>71.0 56.0 0.0 ... 169.0 374.0 221.0</div><input id='attrs-dea222de-de85-40b3-9127-055f91d32463' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-dea222de-de85-40b3-9127-055f91d32463' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-8b522aaa-40da-4192-a2e3-dd0fb6dd79de' class='xr-var-data-in' type='checkbox'><label for='data-8b522aaa-40da-4192-a2e3-dd0fb6dd79de' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Number of flood hours per year</dd><dt><span>units :</span></dt><dd>hours</dd></dl></div><div class='xr-var-data'><pre>array([[ 71.,  56.,   0.,  35.,  28.,  26.,  32.,  19.],
       [ 75.,  73.,   0.,  70., 115., 102.,  97.,  77.],
       [ 25.,  19.,   0.,  39.,  53.,  54., 128.,  17.],
       [ 40.,  21.,   0.,   7.,   8.,   6.,  11.,  83.],
       [ 25.,  69.,   0.,  57.,  38.,  27.,  17.,  48.],
       [109.,  67.,   0., 145., 117., 113., 114.,  26.],
       [ 44.,  25.,   4.,  16.,  33.,  36.,  35.,  47.],
       [ 20.,  12.,   1.,  10.,   4.,  15.,  41.,  12.],
       [ 16.,  50.,   5.,  31.,  46.,  18.,  49.,   4.],
       [ 62.,  78.,   0.,  74.,  63.,  78.,  52.,  46.],
       [ 35.,  75.,   6.,  52.,  17.,  34.,  45.,  19.],
       [ 78.,   4.,   0.,  19.,  24.,  14.,  24.,  15.],
       [ 76.,  22.,   2.,  72., 105.,  82.,  57.,  46.],
       [124.,  81.,   5.,  82.,  68.,  71.,  68.,  44.],
       [ 46.,  53.,   2.,  24.,  16.,  16.,  20.,   7.],
       [ 60.,  15.,   0.,   6.,   1.,   6.,   0., 156.],
       [ 48.,  27.,   5.,  25.,  22.,  15.,  20.,  31.],
       [  4.,   5.,   0.,  21.,  14.,  13.,   9.,  53.],
       [ 98.,  63.,  17.,  65.,  29.,  45.,  11.,  46.],
       [ 48.,  36.,   0.,  25.,  13.,  11.,  18.,  21.],
...
       [ 53., 196.,  68., 163., 180., 206.,  74., 218.],
       [  0., 109.,  23., 110.,  83.,  83.,  74., 108.],
       [  0.,  88.,  70., 158., 145., 156., 164.,  30.],
       [  0.,  84., 127.,  96.,  88., 114.,  66.,  53.],
       [ 52.,  75., 125.,  95., 106.,  84.,  94.,  68.],
       [  6.,  57.,  58.,  38.,  25.,  27.,  24.,  81.],
       [137.,  73.,  94.,  70.,  64.,  72.,  61., 140.],
       [188.,  35.,  57.,  53.,  24.,  30.,  38.,  91.],
       [ 75.,  13.,  22.,  17.,  15.,  16.,  22., 289.],
       [ 84.,  32.,  60.,  46.,  23.,  29.,  70., 122.],
       [ 49.,  99., 102.,  86.,  55.,  67.,  92., 155.],
       [ 91.,  76., 125.,  66.,  14.,  22.,  93.,  92.],
       [196., 171., 198., 133., 145., 150., 166.,  33.],
       [240., 289., 359., 288., 308., 301., 269., 133.],
       [ 67., 178., 209., 118., 124., 121., 109., 120.],
       [ 95., 255., 331., 190., 212., 206., 181., 146.],
       [105., 365., 510., 386., 496., 440., 271.,  24.],
       [136., 126., 123., 110., 169., 128., 163., 157.],
       [ 81.,  81.,  26.,  93.,  82.,  67., 130., 249.],
       [187., 164., 106., 173., 151., 169., 374., 221.]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>flood_days_per_year</span></div><div class='xr-var-dims'>(year, record_id)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>37.0 30.0 0.0 ... 72.0 126.0 58.0</div><input id='attrs-a42fe9b1-f035-45f5-8d5f-60d94ddfdf69' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-a42fe9b1-f035-45f5-8d5f-60d94ddfdf69' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-86e3c35a-428c-4c49-a5e7-b2289f91df9f' class='xr-var-data-in' type='checkbox'><label for='data-86e3c35a-428c-4c49-a5e7-b2289f91df9f' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Number of flood days per year</dd><dt><span>units :</span></dt><dd>days</dd></dl></div><div class='xr-var-data'><pre>array([[ 37.,  30.,   0.,  19.,  13.,  16.,  19.,   9.],
       [ 36.,  40.,   0.,  41.,  61.,  51.,  43.,  13.],
       [ 14.,  14.,   0.,  27.,  25.,  24.,  48.,   5.],
       [ 15.,  11.,   0.,   4.,   5.,   3.,   6.,  16.],
       [ 12.,  33.,   0.,  27.,  17.,  13.,   6.,  12.],
       [ 53.,  32.,   0.,  77.,  61.,  59.,  51.,   7.],
       [ 22.,  17.,   3.,   9.,  19.,  20.,  21.,   6.],
       [ 12.,   6.,   1.,   7.,   3.,  10.,  21.,   4.],
       [ 11.,  23.,   3.,  21.,  23.,   8.,  24.,   2.],
       [ 33.,  38.,   0.,  42.,  30.,  37.,  29.,   8.],
       [ 19.,  39.,   3.,  28.,   8.,  17.,  25.,  11.],
       [ 24.,   4.,   0.,  16.,  15.,   9.,  13.,   2.],
       [ 31.,  14.,   2.,  35.,  42.,  35.,  25.,  13.],
       [ 49.,  43.,   3.,  47.,  34.,  34.,  36.,   8.],
       [ 21.,  29.,   1.,  16.,  11.,  14.,  12.,   4.],
       [ 30.,   9.,   0.,   5.,   1.,   4.,   0.,  29.],
       [ 22.,  15.,   4.,  16.,  11.,   8.,  11.,   8.],
       [  4.,   3.,   0.,  13.,   7.,   7.,   6.,  14.],
       [ 44.,  29.,  10.,  33.,  19.,  25.,   7.,  10.],
       [ 27.,  22.,   0.,  15.,   7.,   6.,  10.,   9.],
...
       [ 23.,  91.,  33.,  87.,  76.,  85.,  37.,  27.],
       [  0.,  53.,  13.,  61.,  43.,  42.,  31.,  16.],
       [  0.,  46.,  31.,  79.,  67.,  73.,  63.,  10.],
       [  0.,  45.,  56.,  49.,  43.,  57.,  30.,  12.],
       [ 25.,  36.,  53.,  42.,  44.,  37.,  43.,  18.],
       [  4.,  30.,  30.,  21.,  13.,  15.,  11.,  28.],
       [ 54.,  38.,  48.,  41.,  31.,  38.,  29.,  38.],
       [ 63.,  20.,  32.,  32.,  17.,  21.,  21.,  11.],
       [ 31.,   7.,  12.,  11.,   8.,   8.,  16.,  69.],
       [ 41.,  18.,  30.,  29.,  14.,  17.,  35.,  35.],
       [ 20.,  49.,  49.,  47.,  29.,  35.,  46.,  44.],
       [ 32.,  46.,  63.,  42.,  12.,  15.,  35.,  20.],
       [ 69.,  72.,  82.,  69.,  66.,  62.,  73.,   7.],
       [ 84., 129., 144., 122., 118., 130., 112.,  31.],
       [ 31.,  80.,  92.,  60.,  52.,  50.,  46.,  31.],
       [ 36.,  98., 123.,  84.,  81.,  72.,  73.,  39.],
       [ 47., 140., 163., 147., 173., 155.,  98.,   8.],
       [ 58.,  52.,  45.,  53.,  74.,  54.,  67.,  46.],
       [ 32.,  43.,  15.,  51.,  44.,  31.,  62.,  55.],
       [ 67.,  72.,  54.,  77.,  69.,  72., 126.,  58.]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>lat</span></div><div class='xr-var-dims'>(record_id)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-22681041-5e75-460d-9a7b-cfbe60714ed4' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-22681041-5e75-460d-9a7b-cfbe60714ed4' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-f5370064-0c60-435f-b391-3cfc28417245' class='xr-var-data-in' type='checkbox'><label for='data-f5370064-0c60-435f-b391-3cfc28417245' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Latitude</dd><dt><span>units :</span></dt><dd>degrees_north</dd></dl></div><div class='xr-var-data'><pre>[8 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>lon</span></div><div class='xr-var-dims'>(record_id)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-254b376e-3a4c-4a80-89e2-61506ffad8cc' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-254b376e-3a4c-4a80-89e2-61506ffad8cc' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-1f08274a-a6b5-476d-9599-4a0a54d063c2' class='xr-var-data-in' type='checkbox'><label for='data-1f08274a-a6b5-476d-9599-4a0a54d063c2' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Longitude</dd><dt><span>units :</span></dt><dd>degrees_east</dd></dl></div><div class='xr-var-data'><pre>[8 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>station_name</span></div><div class='xr-var-dims'>(record_id)</div><div class='xr-var-dtype'>&lt;U16</div><div class='xr-var-preview xr-preview'>&#x27;Johnston&#x27; ... &#x27;Midway&#x27;</div><input id='attrs-3e95e19b-4b72-4220-90d6-786f544ed431' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-3e95e19b-4b72-4220-90d6-786f544ed431' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-8e9c99b0-7d6b-4b9e-9f69-326a54194462' class='xr-var-data-in' type='checkbox'><label for='data-8e9c99b0-7d6b-4b9e-9f69-326a54194462' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Station Name</dd><dt><span>units :</span></dt><dd>1</dd></dl></div><div class='xr-var-data'><pre>array([&#x27;Johnston&#x27;, &#x27;Hilo, Hawaii&#x27;, &#x27;Kawaihae&#x27;, &#x27;Kahului&#x27;, &#x27;Honolulu, Hawaii&#x27;,
       &#x27;Mokuoloe&#x27;, &#x27;Nawiliwili&#x27;, &#x27;Midway&#x27;], dtype=&#x27;&lt;U16&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>station_country</span></div><div class='xr-var-dims'>(record_id)</div><div class='xr-var-dtype'>&lt;U30</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-df50602b-90b6-4da2-bf9e-ea9171f453fc' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-df50602b-90b6-4da2-bf9e-ea9171f453fc' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-e663dd10-7de6-4a23-b52d-72a8d49e15d0' class='xr-var-data-in' type='checkbox'><label for='data-e663dd10-7de6-4a23-b52d-72a8d49e15d0' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Station Country</dd><dt><span>units :</span></dt><dd>1</dd></dl></div><div class='xr-var-data'><pre>[8 values with dtype=&lt;U30]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>slope_days</span></div><div class='xr-var-dims'>(record_id)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.6772 1.515 2.49 ... 1.437 0.9291</div><input id='attrs-84b439e2-0103-48c7-b25b-b8a2b54a1efc' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-84b439e2-0103-48c7-b25b-b8a2b54a1efc' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-fad61cce-a932-4b93-aa2c-89b35b2ace66' class='xr-var-data-in' type='checkbox'><label for='data-fad61cce-a932-4b93-aa2c-89b35b2ace66' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Slope of the trend line</dd><dt><span>units :</span></dt><dd>days/year</dd></dl></div><div class='xr-var-data'><pre>array([0.6771777 , 1.51463415, 2.48989547, 1.4238676 , 1.37874564,
       1.31289199, 1.43728223, 0.92909408])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>intercept_days</span></div><div class='xr-var-dims'>(record_id)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-1.325e+03 ... -1.841e+03</div><input id='attrs-81109e29-0019-4f0d-aa57-171fda1e3273' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-81109e29-0019-4f0d-aa57-171fda1e3273' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-cbfb6f3a-7837-47ed-b2db-bd0d4a50fb99' class='xr-var-data-in' type='checkbox'><label for='data-cbfb6f3a-7837-47ed-b2db-bd0d4a50fb99' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Intercept of the trend line</dd><dt><span>units :</span></dt><dd>days</dd></dl></div><div class='xr-var-data'><pre>array([-1324.9966899 , -2992.83658537, -4957.79721254, -2808.20191638,
       -2723.09094077, -2591.52752613, -2841.48606272, -1840.87787456])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>percent_change_days</span></div><div class='xr-var-dims'>(record_id)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>151.8 567.1 ... 665.1 2.452e+03</div><input id='attrs-881e4ca0-be8a-42b0-a17d-da4a3b37f25c' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-881e4ca0-be8a-42b0-a17d-da4a3b37f25c' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-996b138a-ef03-4043-a75e-31212ee4755f' class='xr-var-data-in' type='checkbox'><label for='data-996b138a-ef03-4043-a75e-31212ee4755f' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Percent change in flood days per year</dd><dt><span>units :</span></dt><dd>%</dd></dl></div><div class='xr-var-data'><pre>array([ 151.77664975,  567.12328767, 7926.13240418,  371.58445101,
        503.11506675,  439.92994746,  665.05441354, 2451.95402299])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>trend_days</span></div><div class='xr-var-dims'>(year, record_id)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>17.85 10.68 -20.33 ... 66.14 38.68</div><input id='attrs-6ba9da5e-c775-4234-b40f-b0327a54ea77' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-6ba9da5e-c775-4234-b40f-b0327a54ea77' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-f6db772d-ca66-48ab-8c8d-801edeb4a115' class='xr-var-data-in' type='checkbox'><label for='data-f6db772d-ca66-48ab-8c8d-801edeb4a115' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Trend line of flood days per year</dd><dt><span>units :</span></dt><dd>days</dd></dl></div><div class='xr-var-data'><pre>array([[ 17.8466899 ,  10.68292683, -20.33449477,  15.32752613,
         10.96167247,  11.93728223,   8.6445993 ,   1.51567944],
       [ 18.5238676 ,  12.19756098, -17.8445993 ,  16.75139373,
         12.34041812,  13.25017422,  10.08188153,   2.44477352],
       [ 19.2010453 ,  13.71219512, -15.35470383,  18.17526132,
         13.71916376,  14.5630662 ,  11.51916376,   3.3738676 ],
       [ 19.878223  ,  15.22682927, -12.86480836,  19.59912892,
         15.09790941,  15.87595819,  12.95644599,   4.30296167],
       [ 20.5554007 ,  16.74146341, -10.37491289,  21.02299652,
         16.47665505,  17.18885017,  14.39372822,   5.23205575],
       [ 21.2325784 ,  18.25609756,  -7.88501742,  22.44686411,
         17.8554007 ,  18.50174216,  15.83101045,   6.16114983],
       [ 21.9097561 ,  19.77073171,  -5.39512195,  23.87073171,
         19.23414634,  19.81463415,  17.26829268,   7.0902439 ],
       [ 22.5869338 ,  21.28536585,  -2.90522648,  25.2945993 ,
         20.61289199,  21.12752613,  18.70557491,   8.01933798],
       [ 23.2641115 ,  22.8       ,  -0.41533101,  26.7184669 ,
         21.99163763,  22.44041812,  20.14285714,   8.94843206],
       [ 23.9412892 ,  24.31463415,   2.07456446,  28.14233449,
         23.37038328,  23.7533101 ,  21.58013937,   9.87752613],
...
       [ 38.83919861,  57.63658537,  56.85226481,  59.4674216 ,
         53.70278746,  52.6369338 ,  53.20034843,  30.31759582],
       [ 39.51637631,  59.15121951,  59.34216028,  60.8912892 ,
         55.0815331 ,  53.94982578,  54.63763066,  31.2466899 ],
       [ 40.19355401,  60.66585366,  61.83205575,  62.31515679,
         56.46027875,  55.26271777,  56.07491289,  32.17578397],
       [ 40.87073171,  62.1804878 ,  64.32195122,  63.73902439,
         57.83902439,  56.57560976,  57.51219512,  33.10487805],
       [ 41.54790941,  63.69512195,  66.81184669,  65.16289199,
         59.21777003,  57.88850174,  58.94947735,  34.03397213],
       [ 42.22508711,  65.2097561 ,  69.30174216,  66.58675958,
         60.59651568,  59.20139373,  60.38675958,  34.9630662 ],
       [ 42.90226481,  66.72439024,  71.79163763,  68.01062718,
         61.97526132,  60.51428571,  61.82404181,  35.89216028],
       [ 43.57944251,  68.23902439,  74.2815331 ,  69.43449477,
         63.35400697,  61.8271777 ,  63.26132404,  36.82125436],
       [ 44.25662021,  69.75365854,  76.77142857,  70.85836237,
         64.73275261,  63.14006969,  64.69860627,  37.75034843],
       [ 44.93379791,  71.26829268,  79.26132404,  72.28222997,
         66.11149826,  64.45296167,  66.1358885 ,  38.67944251]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>slope_hours</span></div><div class='xr-var-dims'>(record_id)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>2.194 3.795 6.195 ... 3.883 3.555</div><input id='attrs-06be837c-7bdd-4087-acd6-5dfb21858bc0' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-06be837c-7bdd-4087-acd6-5dfb21858bc0' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-0355920a-1b53-4dcd-8191-32b89d5e9d04' class='xr-var-data-in' type='checkbox'><label for='data-0355920a-1b53-4dcd-8191-32b89d5e9d04' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Slope of the trend line</dd><dt><span>units :</span></dt><dd>hours/year</dd></dl></div><div class='xr-var-data'><pre>array([2.19355401, 3.79529617, 6.19547038, 3.43867596, 3.68135889,
       3.55261324, 3.88344948, 3.55522648])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>intercept_hours</span></div><div class='xr-var-dims'>(record_id)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-4.318e+03 ... -7.035e+03</div><input id='attrs-4d2bdce6-1e55-429b-8b7d-35c48876f40c' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-4d2bdce6-1e55-429b-8b7d-35c48876f40c' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-2d99cca3-96f9-4486-8605-9794a4ae63e7' class='xr-var-data-in' type='checkbox'><label for='data-2d99cca3-96f9-4486-8605-9794a4ae63e7' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Intercept of the trend line</dd><dt><span>units :</span></dt><dd>hours</dd></dl></div><div class='xr-var-data'><pre>array([ -4318.3228223 ,  -7514.978223  , -12339.89303136,  -6800.91184669,
        -7287.37160279,  -7030.27456446,  -7692.40296167,  -7035.09425087])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>percent_change_hours</span></div><div class='xr-var-dims'>(record_id)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>278.6 1.368e+03 ... 1.832e+03 953.2</div><input id='attrs-9e21ea74-daaa-4ba6-aa52-f8db04afa139' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-9e21ea74-daaa-4ba6-aa52-f8db04afa139' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-8e87718e-57f7-40b3-970d-4b5badc056b1' class='xr-var-data-in' type='checkbox'><label for='data-8e87718e-57f7-40b3-970d-4b5badc056b1' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Percent change in flood hours per year</dd><dt><span>units :</span></dt><dd>%</dd></dl></div><div class='xr-var-data'><pre>array([  278.59276469,  1368.40452261, 19354.3554007 ,   764.89052509,
        1153.75375375,   976.16084251,  1832.38799836,   953.15273237])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>trend_hours</span></div><div class='xr-var-dims'>(year, record_id)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>31.49 11.09 -54.28 ... 163.8 157.1</div><input id='attrs-293aede2-cc26-44ad-9851-4dfa7681ab77' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-293aede2-cc26-44ad-9851-4dfa7681ab77' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-cfbcea66-c5f6-4180-9d14-1afeed9a65f8' class='xr-var-data-in' type='checkbox'><label for='data-cfbcea66-c5f6-4180-9d14-1afeed9a65f8' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Trend line of flood hours per year</dd><dt><span>units :</span></dt><dd>hours</dd></dl></div><div class='xr-var-data'><pre>array([[ 31.49477352,  11.09407666, -54.27526132,  17.9825784 ,
         12.7630662 ,  14.55749129,   8.47735192,  14.91986063],
       [ 33.68832753,  14.88937282, -48.07979094,  21.42125436,
         16.44442509,  18.11010453,  12.36080139,  18.47508711],
       [ 35.88188153,  18.68466899, -41.88432056,  24.85993031,
         20.12578397,  21.66271777,  16.24425087,  22.03031359],
       [ 38.07543554,  22.47996516, -35.68885017,  28.29860627,
         23.80714286,  25.21533101,  20.12770035,  25.58554007],
       [ 40.26898955,  26.27526132, -29.49337979,  31.73728223,
         27.48850174,  28.76794425,  24.01114983,  29.14076655],
       [ 42.46254355,  30.07055749, -23.29790941,  35.17595819,
         31.16986063,  32.32055749,  27.8945993 ,  32.69599303],
       [ 44.65609756,  33.86585366, -17.10243902,  38.61463415,
         34.85121951,  35.87317073,  31.77804878,  36.25121951],
       [ 46.84965157,  37.66114983, -10.90696864,  42.0533101 ,
         38.5325784 ,  39.42578397,  35.66149826,  39.80644599],
       [ 49.04320557,  41.45644599,  -4.71149826,  45.49198606,
         42.21393728,  42.97839721,  39.54494774,  43.36167247],
       [ 51.23675958,  45.25174216,   1.48397213,  48.93066202,
         45.89529617,  46.53101045,  43.42839721,  46.91689895],
...
       [ 99.49494774, 128.74825784, 137.78432056, 124.5815331 ,
        126.88519164, 124.68850174, 128.86428571, 125.13188153],
       [101.68850174, 132.54355401, 143.97979094, 128.02020906,
        130.56655052, 128.24111498, 132.74773519, 128.68710801],
       [103.88205575, 136.33885017, 150.17526132, 131.45888502,
        134.24790941, 131.79372822, 136.63118467, 132.24233449],
       [106.07560976, 140.13414634, 156.37073171, 134.89756098,
        137.92926829, 135.34634146, 140.51463415, 135.79756098],
       [108.26916376, 143.92944251, 162.56620209, 138.33623693,
        141.61062718, 138.8989547 , 144.39808362, 139.35278746],
       [110.46271777, 147.72473868, 168.76167247, 141.77491289,
        145.29198606, 142.45156794, 148.2815331 , 142.90801394],
       [112.65627178, 151.52003484, 174.95714286, 145.21358885,
        148.97334495, 146.00418118, 152.16498258, 146.46324042],
       [114.84982578, 155.31533101, 181.15261324, 148.65226481,
        152.65470383, 149.55679443, 156.04843206, 150.0184669 ],
       [117.04337979, 159.11062718, 187.34808362, 152.09094077,
        156.33606272, 153.10940767, 159.93188153, 153.57369338],
       [119.2369338 , 162.90592334, 193.54355401, 155.52961672,
        160.0174216 , 156.66202091, 163.81533101, 157.12891986]])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-9bf18431-1a03-4931-822e-c6dc063d784b' class='xr-section-summary-in' type='checkbox'  ><label for='section-9bf18431-1a03-4931-822e-c6dc063d784b' class='xr-section-summary' >Indexes: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>year</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-c79200b3-f877-4d67-b260-d574af2a280f' class='xr-index-data-in' type='checkbox'/><label for='index-c79200b3-f877-4d67-b260-d574af2a280f' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994,
       1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006,
       2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017, 2018,
       2019, 2020, 2021, 2022, 2023],
      dtype=&#x27;int32&#x27;, name=&#x27;year&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>record_id</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-9db63422-7052-4846-b09c-b4a008db4c75' class='xr-index-data-in' type='checkbox'/><label for='index-9db63422-7052-4846-b09c-b4a008db4c75' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([52, 60, 552, 59, 57, 61, 58, 50], dtype=&#x27;int64&#x27;, name=&#x27;record_id&#x27;))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-27881101-ade0-4215-ac6d-406e26c3a631' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-27881101-ade0-4215-ac6d-406e26c3a631' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div></div></div>
</div>
<section id="plot-time-series-of-all-stations">
<h3>Plot time series of all stations<a class="headerlink" href="#plot-time-series-of-all-stations" title="Permalink to this heading">#</a></h3>
<div class="cell tag_hide-input docutils container">
<details class="hide above-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell source</span>
<span class="expanded">Hide code cell source</span>
</summary>
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># Set the color for each station</span>
<span class="n">colors</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">(</span><span class="s1">&#39;Dark2&#39;</span><span class="p">,</span> <span class="n">n_colors</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">ds</span><span class="p">[</span><span class="s1">&#39;record_id&#39;</span><span class="p">]))</span>

<span class="c1"># Plot the data for each station with the same color</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">record_id</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">ds</span><span class="p">[</span><span class="s1">&#39;record_id&#39;</span><span class="p">]):</span>
    <span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ds</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">],</span> <span class="n">ds</span><span class="p">[</span><span class="s1">&#39;flood_days_per_year&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">record_id</span><span class="o">=</span><span class="n">record_id</span><span class="p">),</span> <span class="n">label</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">colors</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;:&#39;</span><span class="p">)</span>
    <span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ds</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">],</span> <span class="n">ds</span><span class="p">[</span><span class="s1">&#39;flood_hours_per_year&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">record_id</span><span class="o">=</span><span class="n">record_id</span><span class="p">),</span> <span class="n">label</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">colors</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;:&#39;</span><span class="p">)</span>

    <span class="c1"># Plot the trend lines</span>
    <span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ds</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">],</span> <span class="n">ds</span><span class="p">[</span><span class="s1">&#39;trend_days&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">record_id</span><span class="o">=</span><span class="n">record_id</span><span class="p">),</span> <span class="n">label</span><span class="o">=</span><span class="kc">None</span> <span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">colors</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
    <span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ds</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">],</span> <span class="n">ds</span><span class="p">[</span><span class="s1">&#39;trend_hours&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">record_id</span><span class="o">=</span><span class="n">record_id</span><span class="p">),</span> <span class="n">label</span><span class="o">=</span><span class="n">ds</span><span class="p">[</span><span class="s1">&#39;station_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">record_id</span><span class="o">=</span><span class="n">record_id</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">colors</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>

<span class="c1"># Set the labels and tick labels</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Flood Days&#39;</span><span class="p">)</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">([])</span>

<span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Year&#39;</span><span class="p">)</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Flood Hours&#39;</span><span class="p">)</span>

<span class="c1"># add a legend </span>
<span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">ncol</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">columnspacing</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">2.25</span><span class="p">),</span> <span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper left&#39;</span><span class="p">)</span>

<span class="c1">#color the legend text the same as the lines and then remove the lines</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">record_id</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">ds</span><span class="p">[</span><span class="s1">&#39;record_id&#39;</span><span class="p">]):</span>
    <span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">get_legend</span><span class="p">()</span><span class="o">.</span><span class="n">get_texts</span><span class="p">()[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="n">colors</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
    <span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">get_legend</span><span class="p">()</span><span class="o">.</span><span class="n">get_texts</span><span class="p">()[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set_fontsize</span><span class="p">(</span><span class="s1">&#39;small&#39;</span><span class="p">)</span>
    <span class="c1"># axs[1].get_legend().get_lines()[i].set_linewidth(0)</span>

<span class="c1">#remove box around legend</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">get_legend</span><span class="p">()</span><span class="o">.</span><span class="n">get_frame</span><span class="p">()</span><span class="o">.</span><span class="n">set_linewidth</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>    
</pre></div>
</div>
</div>
</details>
<div class="cell_output docutils container">
<img alt="../_images/de5f2061f3a74ce36308361833a04f4b6af29f5fa74c47b7ab68391bef0f1049.png" src="../_images/de5f2061f3a74ce36308361833a04f4b6af29f5fa74c47b7ab68391bef0f1049.png" />
</div>
</div>
</section>
<section id="create-a-table">
<h3>Create a Table<a class="headerlink" href="#create-a-table" title="Permalink to this heading">#</a></h3>
<p>Now we’ll generate a table with this information, which will be saved as a .csv in the output directory specified at the top of this notebook.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt; Size: 13kB
Dimensions:               (year: 41, record_id: 8)
Coordinates:
  * year                  (year) int32 164B 1983 1984 1985 ... 2021 2022 2023
  * record_id             (record_id) int64 64B 52 60 552 59 57 61 58 50
Data variables: (12/14)
    flood_hours_per_year  (year, record_id) float64 3kB 71.0 56.0 ... 221.0
    flood_days_per_year   (year, record_id) float64 3kB 37.0 30.0 ... 126.0 58.0
    lat                   (record_id) float32 32B ...
    lon                   (record_id) float32 32B ...
    station_name          (record_id) &lt;U16 512B &#x27;Johnston&#x27; ... &#x27;Midway&#x27;
    station_country       (record_id) &lt;U30 960B ...
    ...                    ...
    percent_change_days   (record_id) float64 64B 151.8 567.1 ... 2.452e+03
    trend_days            (year, record_id) float64 3kB 17.85 10.68 ... 38.68
    slope_hours           (record_id) float64 64B 2.194 3.795 ... 3.883 3.555
    intercept_hours       (record_id) float64 64B -4.318e+03 ... -7.035e+03
    percent_change_hours  (record_id) float64 64B 278.6 1.368e+03 ... 953.2
    trend_hours           (year, record_id) float64 3kB 31.49 11.09 ... 157.1</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-f3ea5df7-335c-4ae1-b159-122ecbe2eb20' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-f3ea5df7-335c-4ae1-b159-122ecbe2eb20' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>year</span>: 41</li><li><span class='xr-has-index'>record_id</span>: 8</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-d1a1b216-76ef-43a5-868a-d4e438b214fc' class='xr-section-summary-in' type='checkbox'  checked><label for='section-d1a1b216-76ef-43a5-868a-d4e438b214fc' class='xr-section-summary' >Coordinates: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>year</span></div><div class='xr-var-dims'>(year)</div><div class='xr-var-dtype'>int32</div><div class='xr-var-preview xr-preview'>1983 1984 1985 ... 2021 2022 2023</div><input id='attrs-cc7d08aa-6bfa-4f8b-add5-620a137d937e' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-cc7d08aa-6bfa-4f8b-add5-620a137d937e' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-432e522b-d3dc-4d98-872f-16a9940f9fb1' class='xr-var-data-in' type='checkbox'><label for='data-432e522b-d3dc-4d98-872f-16a9940f9fb1' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Year</dd><dt><span>units :</span></dt><dd>calendar year</dd></dl></div><div class='xr-var-data'><pre>array([1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994,
       1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006,
       2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017, 2018,
       2019, 2020, 2021, 2022, 2023], dtype=int32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>record_id</span></div><div class='xr-var-dims'>(record_id)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>52 60 552 59 57 61 58 50</div><input id='attrs-7cb870dc-845f-4420-abdf-beba9e5254dc' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-7cb870dc-845f-4420-abdf-beba9e5254dc' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-cbc31461-7bc8-436c-bcc3-a3154a383174' class='xr-var-data-in' type='checkbox'><label for='data-cbc31461-7bc8-436c-bcc3-a3154a383174' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([ 52,  60, 552,  59,  57,  61,  58,  50])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-0da67d7f-87e0-49e0-a0e9-1a1c617500f1' class='xr-section-summary-in' type='checkbox'  checked><label for='section-0da67d7f-87e0-49e0-a0e9-1a1c617500f1' class='xr-section-summary' >Data variables: <span>(14)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>flood_hours_per_year</span></div><div class='xr-var-dims'>(year, record_id)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>71.0 56.0 0.0 ... 169.0 374.0 221.0</div><input id='attrs-019de993-8d97-486f-9cad-dbb2341e817f' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-019de993-8d97-486f-9cad-dbb2341e817f' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-b8dc84b4-5e56-4e9f-bfb2-e270e6ed17e4' class='xr-var-data-in' type='checkbox'><label for='data-b8dc84b4-5e56-4e9f-bfb2-e270e6ed17e4' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Number of flood hours per year</dd><dt><span>units :</span></dt><dd>hours</dd></dl></div><div class='xr-var-data'><pre>array([[ 71.,  56.,   0.,  35.,  28.,  26.,  32.,  19.],
       [ 75.,  73.,   0.,  70., 115., 102.,  97.,  77.],
       [ 25.,  19.,   0.,  39.,  53.,  54., 128.,  17.],
       [ 40.,  21.,   0.,   7.,   8.,   6.,  11.,  83.],
       [ 25.,  69.,   0.,  57.,  38.,  27.,  17.,  48.],
       [109.,  67.,   0., 145., 117., 113., 114.,  26.],
       [ 44.,  25.,   4.,  16.,  33.,  36.,  35.,  47.],
       [ 20.,  12.,   1.,  10.,   4.,  15.,  41.,  12.],
       [ 16.,  50.,   5.,  31.,  46.,  18.,  49.,   4.],
       [ 62.,  78.,   0.,  74.,  63.,  78.,  52.,  46.],
       [ 35.,  75.,   6.,  52.,  17.,  34.,  45.,  19.],
       [ 78.,   4.,   0.,  19.,  24.,  14.,  24.,  15.],
       [ 76.,  22.,   2.,  72., 105.,  82.,  57.,  46.],
       [124.,  81.,   5.,  82.,  68.,  71.,  68.,  44.],
       [ 46.,  53.,   2.,  24.,  16.,  16.,  20.,   7.],
       [ 60.,  15.,   0.,   6.,   1.,   6.,   0., 156.],
       [ 48.,  27.,   5.,  25.,  22.,  15.,  20.,  31.],
       [  4.,   5.,   0.,  21.,  14.,  13.,   9.,  53.],
       [ 98.,  63.,  17.,  65.,  29.,  45.,  11.,  46.],
       [ 48.,  36.,   0.,  25.,  13.,  11.,  18.,  21.],
...
       [ 53., 196.,  68., 163., 180., 206.,  74., 218.],
       [  0., 109.,  23., 110.,  83.,  83.,  74., 108.],
       [  0.,  88.,  70., 158., 145., 156., 164.,  30.],
       [  0.,  84., 127.,  96.,  88., 114.,  66.,  53.],
       [ 52.,  75., 125.,  95., 106.,  84.,  94.,  68.],
       [  6.,  57.,  58.,  38.,  25.,  27.,  24.,  81.],
       [137.,  73.,  94.,  70.,  64.,  72.,  61., 140.],
       [188.,  35.,  57.,  53.,  24.,  30.,  38.,  91.],
       [ 75.,  13.,  22.,  17.,  15.,  16.,  22., 289.],
       [ 84.,  32.,  60.,  46.,  23.,  29.,  70., 122.],
       [ 49.,  99., 102.,  86.,  55.,  67.,  92., 155.],
       [ 91.,  76., 125.,  66.,  14.,  22.,  93.,  92.],
       [196., 171., 198., 133., 145., 150., 166.,  33.],
       [240., 289., 359., 288., 308., 301., 269., 133.],
       [ 67., 178., 209., 118., 124., 121., 109., 120.],
       [ 95., 255., 331., 190., 212., 206., 181., 146.],
       [105., 365., 510., 386., 496., 440., 271.,  24.],
       [136., 126., 123., 110., 169., 128., 163., 157.],
       [ 81.,  81.,  26.,  93.,  82.,  67., 130., 249.],
       [187., 164., 106., 173., 151., 169., 374., 221.]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>flood_days_per_year</span></div><div class='xr-var-dims'>(year, record_id)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>37.0 30.0 0.0 ... 72.0 126.0 58.0</div><input id='attrs-5327593d-336c-409c-a471-d8e17d66ec79' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-5327593d-336c-409c-a471-d8e17d66ec79' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-ffa54342-cf15-4690-a0b7-920bf46a0900' class='xr-var-data-in' type='checkbox'><label for='data-ffa54342-cf15-4690-a0b7-920bf46a0900' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Number of flood days per year</dd><dt><span>units :</span></dt><dd>days</dd></dl></div><div class='xr-var-data'><pre>array([[ 37.,  30.,   0.,  19.,  13.,  16.,  19.,   9.],
       [ 36.,  40.,   0.,  41.,  61.,  51.,  43.,  13.],
       [ 14.,  14.,   0.,  27.,  25.,  24.,  48.,   5.],
       [ 15.,  11.,   0.,   4.,   5.,   3.,   6.,  16.],
       [ 12.,  33.,   0.,  27.,  17.,  13.,   6.,  12.],
       [ 53.,  32.,   0.,  77.,  61.,  59.,  51.,   7.],
       [ 22.,  17.,   3.,   9.,  19.,  20.,  21.,   6.],
       [ 12.,   6.,   1.,   7.,   3.,  10.,  21.,   4.],
       [ 11.,  23.,   3.,  21.,  23.,   8.,  24.,   2.],
       [ 33.,  38.,   0.,  42.,  30.,  37.,  29.,   8.],
       [ 19.,  39.,   3.,  28.,   8.,  17.,  25.,  11.],
       [ 24.,   4.,   0.,  16.,  15.,   9.,  13.,   2.],
       [ 31.,  14.,   2.,  35.,  42.,  35.,  25.,  13.],
       [ 49.,  43.,   3.,  47.,  34.,  34.,  36.,   8.],
       [ 21.,  29.,   1.,  16.,  11.,  14.,  12.,   4.],
       [ 30.,   9.,   0.,   5.,   1.,   4.,   0.,  29.],
       [ 22.,  15.,   4.,  16.,  11.,   8.,  11.,   8.],
       [  4.,   3.,   0.,  13.,   7.,   7.,   6.,  14.],
       [ 44.,  29.,  10.,  33.,  19.,  25.,   7.,  10.],
       [ 27.,  22.,   0.,  15.,   7.,   6.,  10.,   9.],
...
       [ 23.,  91.,  33.,  87.,  76.,  85.,  37.,  27.],
       [  0.,  53.,  13.,  61.,  43.,  42.,  31.,  16.],
       [  0.,  46.,  31.,  79.,  67.,  73.,  63.,  10.],
       [  0.,  45.,  56.,  49.,  43.,  57.,  30.,  12.],
       [ 25.,  36.,  53.,  42.,  44.,  37.,  43.,  18.],
       [  4.,  30.,  30.,  21.,  13.,  15.,  11.,  28.],
       [ 54.,  38.,  48.,  41.,  31.,  38.,  29.,  38.],
       [ 63.,  20.,  32.,  32.,  17.,  21.,  21.,  11.],
       [ 31.,   7.,  12.,  11.,   8.,   8.,  16.,  69.],
       [ 41.,  18.,  30.,  29.,  14.,  17.,  35.,  35.],
       [ 20.,  49.,  49.,  47.,  29.,  35.,  46.,  44.],
       [ 32.,  46.,  63.,  42.,  12.,  15.,  35.,  20.],
       [ 69.,  72.,  82.,  69.,  66.,  62.,  73.,   7.],
       [ 84., 129., 144., 122., 118., 130., 112.,  31.],
       [ 31.,  80.,  92.,  60.,  52.,  50.,  46.,  31.],
       [ 36.,  98., 123.,  84.,  81.,  72.,  73.,  39.],
       [ 47., 140., 163., 147., 173., 155.,  98.,   8.],
       [ 58.,  52.,  45.,  53.,  74.,  54.,  67.,  46.],
       [ 32.,  43.,  15.,  51.,  44.,  31.,  62.,  55.],
       [ 67.,  72.,  54.,  77.,  69.,  72., 126.,  58.]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>lat</span></div><div class='xr-var-dims'>(record_id)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-9dec18f8-c5cf-454a-be4e-bacaa148b6fe' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-9dec18f8-c5cf-454a-be4e-bacaa148b6fe' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-cac6ec7b-862e-4458-b817-7a354b128751' class='xr-var-data-in' type='checkbox'><label for='data-cac6ec7b-862e-4458-b817-7a354b128751' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Latitude</dd><dt><span>units :</span></dt><dd>degrees_north</dd></dl></div><div class='xr-var-data'><pre>[8 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>lon</span></div><div class='xr-var-dims'>(record_id)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-4f05c3cf-fe3c-4d61-a75d-f41a30a50e4e' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-4f05c3cf-fe3c-4d61-a75d-f41a30a50e4e' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-67567681-19e9-4236-963e-79c96e44cbf8' class='xr-var-data-in' type='checkbox'><label for='data-67567681-19e9-4236-963e-79c96e44cbf8' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Longitude</dd><dt><span>units :</span></dt><dd>degrees_east</dd></dl></div><div class='xr-var-data'><pre>[8 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>station_name</span></div><div class='xr-var-dims'>(record_id)</div><div class='xr-var-dtype'>&lt;U16</div><div class='xr-var-preview xr-preview'>&#x27;Johnston&#x27; ... &#x27;Midway&#x27;</div><input id='attrs-ac0e523e-13da-4ebe-8626-68059fd3cf49' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-ac0e523e-13da-4ebe-8626-68059fd3cf49' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-59bd8576-a462-47e0-b522-3bb76100aea0' class='xr-var-data-in' type='checkbox'><label for='data-59bd8576-a462-47e0-b522-3bb76100aea0' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Station Name</dd><dt><span>units :</span></dt><dd>1</dd></dl></div><div class='xr-var-data'><pre>array([&#x27;Johnston&#x27;, &#x27;Hilo, Hawaii&#x27;, &#x27;Kawaihae&#x27;, &#x27;Kahului&#x27;, &#x27;Honolulu, Hawaii&#x27;,
       &#x27;Mokuoloe&#x27;, &#x27;Nawiliwili&#x27;, &#x27;Midway&#x27;], dtype=&#x27;&lt;U16&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>station_country</span></div><div class='xr-var-dims'>(record_id)</div><div class='xr-var-dtype'>&lt;U30</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-a67a3e6c-1d6a-4b5f-b8b1-5f3f91810139' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-a67a3e6c-1d6a-4b5f-b8b1-5f3f91810139' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-4b09871c-aa47-4026-9e3d-d80b5ba48721' class='xr-var-data-in' type='checkbox'><label for='data-4b09871c-aa47-4026-9e3d-d80b5ba48721' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Station Country</dd><dt><span>units :</span></dt><dd>1</dd></dl></div><div class='xr-var-data'><pre>[8 values with dtype=&lt;U30]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>slope_days</span></div><div class='xr-var-dims'>(record_id)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.6772 1.515 2.49 ... 1.437 0.9291</div><input id='attrs-93d627bb-0235-44a1-bf17-8db02b80dfc1' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-93d627bb-0235-44a1-bf17-8db02b80dfc1' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-571b8d1b-64d8-4cec-be81-f4f47f0ba13d' class='xr-var-data-in' type='checkbox'><label for='data-571b8d1b-64d8-4cec-be81-f4f47f0ba13d' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Slope of the trend line</dd><dt><span>units :</span></dt><dd>days/year</dd></dl></div><div class='xr-var-data'><pre>array([0.6771777 , 1.51463415, 2.48989547, 1.4238676 , 1.37874564,
       1.31289199, 1.43728223, 0.92909408])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>intercept_days</span></div><div class='xr-var-dims'>(record_id)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-1.325e+03 ... -1.841e+03</div><input id='attrs-6eeba0be-b397-43f2-83b5-6fb431444f47' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-6eeba0be-b397-43f2-83b5-6fb431444f47' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-5335dc5c-1993-4d04-88c9-aec6d05e4379' class='xr-var-data-in' type='checkbox'><label for='data-5335dc5c-1993-4d04-88c9-aec6d05e4379' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Intercept of the trend line</dd><dt><span>units :</span></dt><dd>days</dd></dl></div><div class='xr-var-data'><pre>array([-1324.9966899 , -2992.83658537, -4957.79721254, -2808.20191638,
       -2723.09094077, -2591.52752613, -2841.48606272, -1840.87787456])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>percent_change_days</span></div><div class='xr-var-dims'>(record_id)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>151.8 567.1 ... 665.1 2.452e+03</div><input id='attrs-de7be5d1-935f-4f9c-8ca9-490e0b7b731e' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-de7be5d1-935f-4f9c-8ca9-490e0b7b731e' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-234fca6e-f35e-4e7a-89dc-ef7cf08ff8c7' class='xr-var-data-in' type='checkbox'><label for='data-234fca6e-f35e-4e7a-89dc-ef7cf08ff8c7' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Percent change in flood days per year</dd><dt><span>units :</span></dt><dd>%</dd></dl></div><div class='xr-var-data'><pre>array([ 151.77664975,  567.12328767, 7926.13240418,  371.58445101,
        503.11506675,  439.92994746,  665.05441354, 2451.95402299])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>trend_days</span></div><div class='xr-var-dims'>(year, record_id)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>17.85 10.68 -20.33 ... 66.14 38.68</div><input id='attrs-ad0c747b-2a6c-4a9b-97b1-529187fe479d' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-ad0c747b-2a6c-4a9b-97b1-529187fe479d' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-b0db110e-e788-4640-95e7-5e992229adf2' class='xr-var-data-in' type='checkbox'><label for='data-b0db110e-e788-4640-95e7-5e992229adf2' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Trend line of flood days per year</dd><dt><span>units :</span></dt><dd>days</dd></dl></div><div class='xr-var-data'><pre>array([[ 17.8466899 ,  10.68292683, -20.33449477,  15.32752613,
         10.96167247,  11.93728223,   8.6445993 ,   1.51567944],
       [ 18.5238676 ,  12.19756098, -17.8445993 ,  16.75139373,
         12.34041812,  13.25017422,  10.08188153,   2.44477352],
       [ 19.2010453 ,  13.71219512, -15.35470383,  18.17526132,
         13.71916376,  14.5630662 ,  11.51916376,   3.3738676 ],
       [ 19.878223  ,  15.22682927, -12.86480836,  19.59912892,
         15.09790941,  15.87595819,  12.95644599,   4.30296167],
       [ 20.5554007 ,  16.74146341, -10.37491289,  21.02299652,
         16.47665505,  17.18885017,  14.39372822,   5.23205575],
       [ 21.2325784 ,  18.25609756,  -7.88501742,  22.44686411,
         17.8554007 ,  18.50174216,  15.83101045,   6.16114983],
       [ 21.9097561 ,  19.77073171,  -5.39512195,  23.87073171,
         19.23414634,  19.81463415,  17.26829268,   7.0902439 ],
       [ 22.5869338 ,  21.28536585,  -2.90522648,  25.2945993 ,
         20.61289199,  21.12752613,  18.70557491,   8.01933798],
       [ 23.2641115 ,  22.8       ,  -0.41533101,  26.7184669 ,
         21.99163763,  22.44041812,  20.14285714,   8.94843206],
       [ 23.9412892 ,  24.31463415,   2.07456446,  28.14233449,
         23.37038328,  23.7533101 ,  21.58013937,   9.87752613],
...
       [ 38.83919861,  57.63658537,  56.85226481,  59.4674216 ,
         53.70278746,  52.6369338 ,  53.20034843,  30.31759582],
       [ 39.51637631,  59.15121951,  59.34216028,  60.8912892 ,
         55.0815331 ,  53.94982578,  54.63763066,  31.2466899 ],
       [ 40.19355401,  60.66585366,  61.83205575,  62.31515679,
         56.46027875,  55.26271777,  56.07491289,  32.17578397],
       [ 40.87073171,  62.1804878 ,  64.32195122,  63.73902439,
         57.83902439,  56.57560976,  57.51219512,  33.10487805],
       [ 41.54790941,  63.69512195,  66.81184669,  65.16289199,
         59.21777003,  57.88850174,  58.94947735,  34.03397213],
       [ 42.22508711,  65.2097561 ,  69.30174216,  66.58675958,
         60.59651568,  59.20139373,  60.38675958,  34.9630662 ],
       [ 42.90226481,  66.72439024,  71.79163763,  68.01062718,
         61.97526132,  60.51428571,  61.82404181,  35.89216028],
       [ 43.57944251,  68.23902439,  74.2815331 ,  69.43449477,
         63.35400697,  61.8271777 ,  63.26132404,  36.82125436],
       [ 44.25662021,  69.75365854,  76.77142857,  70.85836237,
         64.73275261,  63.14006969,  64.69860627,  37.75034843],
       [ 44.93379791,  71.26829268,  79.26132404,  72.28222997,
         66.11149826,  64.45296167,  66.1358885 ,  38.67944251]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>slope_hours</span></div><div class='xr-var-dims'>(record_id)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>2.194 3.795 6.195 ... 3.883 3.555</div><input id='attrs-02a0f053-d3c0-4bd9-91d1-6bca33e47d68' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-02a0f053-d3c0-4bd9-91d1-6bca33e47d68' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-fde19868-c141-40c4-89f3-f14339916117' class='xr-var-data-in' type='checkbox'><label for='data-fde19868-c141-40c4-89f3-f14339916117' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Slope of the trend line</dd><dt><span>units :</span></dt><dd>hours/year</dd></dl></div><div class='xr-var-data'><pre>array([2.19355401, 3.79529617, 6.19547038, 3.43867596, 3.68135889,
       3.55261324, 3.88344948, 3.55522648])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>intercept_hours</span></div><div class='xr-var-dims'>(record_id)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-4.318e+03 ... -7.035e+03</div><input id='attrs-5762dec9-de38-4752-97cd-dab86d6b9ce5' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-5762dec9-de38-4752-97cd-dab86d6b9ce5' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-f5ce1d46-64bb-4c64-be68-81cca95a968c' class='xr-var-data-in' type='checkbox'><label for='data-f5ce1d46-64bb-4c64-be68-81cca95a968c' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Intercept of the trend line</dd><dt><span>units :</span></dt><dd>hours</dd></dl></div><div class='xr-var-data'><pre>array([ -4318.3228223 ,  -7514.978223  , -12339.89303136,  -6800.91184669,
        -7287.37160279,  -7030.27456446,  -7692.40296167,  -7035.09425087])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>percent_change_hours</span></div><div class='xr-var-dims'>(record_id)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>278.6 1.368e+03 ... 1.832e+03 953.2</div><input id='attrs-e8f8f9d0-a02d-4cd9-be5a-9bed520029c7' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-e8f8f9d0-a02d-4cd9-be5a-9bed520029c7' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-4635391a-ccca-4d6f-aaf7-b47e3a27a51d' class='xr-var-data-in' type='checkbox'><label for='data-4635391a-ccca-4d6f-aaf7-b47e3a27a51d' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Percent change in flood hours per year</dd><dt><span>units :</span></dt><dd>%</dd></dl></div><div class='xr-var-data'><pre>array([  278.59276469,  1368.40452261, 19354.3554007 ,   764.89052509,
        1153.75375375,   976.16084251,  1832.38799836,   953.15273237])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>trend_hours</span></div><div class='xr-var-dims'>(year, record_id)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>31.49 11.09 -54.28 ... 163.8 157.1</div><input id='attrs-53d256a3-b5f4-4213-a77d-edfa6dffd399' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-53d256a3-b5f4-4213-a77d-edfa6dffd399' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-2258d075-d2c5-41f0-84c4-2eb17aeb5557' class='xr-var-data-in' type='checkbox'><label for='data-2258d075-d2c5-41f0-84c4-2eb17aeb5557' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Trend line of flood hours per year</dd><dt><span>units :</span></dt><dd>hours</dd></dl></div><div class='xr-var-data'><pre>array([[ 31.49477352,  11.09407666, -54.27526132,  17.9825784 ,
         12.7630662 ,  14.55749129,   8.47735192,  14.91986063],
       [ 33.68832753,  14.88937282, -48.07979094,  21.42125436,
         16.44442509,  18.11010453,  12.36080139,  18.47508711],
       [ 35.88188153,  18.68466899, -41.88432056,  24.85993031,
         20.12578397,  21.66271777,  16.24425087,  22.03031359],
       [ 38.07543554,  22.47996516, -35.68885017,  28.29860627,
         23.80714286,  25.21533101,  20.12770035,  25.58554007],
       [ 40.26898955,  26.27526132, -29.49337979,  31.73728223,
         27.48850174,  28.76794425,  24.01114983,  29.14076655],
       [ 42.46254355,  30.07055749, -23.29790941,  35.17595819,
         31.16986063,  32.32055749,  27.8945993 ,  32.69599303],
       [ 44.65609756,  33.86585366, -17.10243902,  38.61463415,
         34.85121951,  35.87317073,  31.77804878,  36.25121951],
       [ 46.84965157,  37.66114983, -10.90696864,  42.0533101 ,
         38.5325784 ,  39.42578397,  35.66149826,  39.80644599],
       [ 49.04320557,  41.45644599,  -4.71149826,  45.49198606,
         42.21393728,  42.97839721,  39.54494774,  43.36167247],
       [ 51.23675958,  45.25174216,   1.48397213,  48.93066202,
         45.89529617,  46.53101045,  43.42839721,  46.91689895],
...
       [ 99.49494774, 128.74825784, 137.78432056, 124.5815331 ,
        126.88519164, 124.68850174, 128.86428571, 125.13188153],
       [101.68850174, 132.54355401, 143.97979094, 128.02020906,
        130.56655052, 128.24111498, 132.74773519, 128.68710801],
       [103.88205575, 136.33885017, 150.17526132, 131.45888502,
        134.24790941, 131.79372822, 136.63118467, 132.24233449],
       [106.07560976, 140.13414634, 156.37073171, 134.89756098,
        137.92926829, 135.34634146, 140.51463415, 135.79756098],
       [108.26916376, 143.92944251, 162.56620209, 138.33623693,
        141.61062718, 138.8989547 , 144.39808362, 139.35278746],
       [110.46271777, 147.72473868, 168.76167247, 141.77491289,
        145.29198606, 142.45156794, 148.2815331 , 142.90801394],
       [112.65627178, 151.52003484, 174.95714286, 145.21358885,
        148.97334495, 146.00418118, 152.16498258, 146.46324042],
       [114.84982578, 155.31533101, 181.15261324, 148.65226481,
        152.65470383, 149.55679443, 156.04843206, 150.0184669 ],
       [117.04337979, 159.11062718, 187.34808362, 152.09094077,
        156.33606272, 153.10940767, 159.93188153, 153.57369338],
       [119.2369338 , 162.90592334, 193.54355401, 155.52961672,
        160.0174216 , 156.66202091, 163.81533101, 157.12891986]])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-bf5dee49-bfd2-4f1f-96b2-06ceadb6a4c7' class='xr-section-summary-in' type='checkbox'  ><label for='section-bf5dee49-bfd2-4f1f-96b2-06ceadb6a4c7' class='xr-section-summary' >Indexes: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>year</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-2dbfafac-d0ba-4403-a2e4-3979751470d4' class='xr-index-data-in' type='checkbox'/><label for='index-2dbfafac-d0ba-4403-a2e4-3979751470d4' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994,
       1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006,
       2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017, 2018,
       2019, 2020, 2021, 2022, 2023],
      dtype=&#x27;int32&#x27;, name=&#x27;year&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>record_id</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-de514449-e91c-4543-8b11-8f91c1f2852a' class='xr-index-data-in' type='checkbox'/><label for='index-de514449-e91c-4543-8b11-8f91c1f2852a' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([52, 60, 552, 59, 57, 61, 58, 50], dtype=&#x27;int64&#x27;, name=&#x27;record_id&#x27;))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-2a979566-677a-4b09-a2eb-8a088eb1df88' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-2a979566-677a-4b09-a2eb-8a088eb1df88' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="c1"># make a dataframe with the percent change in flood days and hours per year, with given threshold</span>
<span class="n">percent_change_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;percent_change_days&#39;</span><span class="p">:</span> <span class="n">ds</span><span class="p">[</span><span class="s1">&#39;percent_change_days&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="s1">&#39;percent_change_hours&#39;</span><span class="p">:</span> <span class="n">ds</span><span class="p">[</span><span class="s1">&#39;percent_change_hours&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="s1">&#39;threshold&#39;</span><span class="p">:</span> <span class="n">thresholds</span><span class="p">})</span>

<span class="c1"># add the station name and country</span>
<span class="n">percent_change_df</span><span class="p">[</span><span class="s1">&#39;station&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ds</span><span class="p">[</span><span class="s1">&#39;station_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
<span class="n">percent_change_df</span><span class="p">[</span><span class="s1">&#39;country&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ds</span><span class="p">[</span><span class="s1">&#39;station_country&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>

<span class="c1"># reorder the columns</span>
<span class="n">percent_change_df</span> <span class="o">=</span> <span class="n">percent_change_df</span><span class="p">[[</span><span class="s1">&#39;station&#39;</span><span class="p">,</span> <span class="s1">&#39;country&#39;</span><span class="p">,</span> <span class="s1">&#39;threshold&#39;</span><span class="p">,</span> <span class="s1">&#39;percent_change_days&#39;</span><span class="p">,</span> <span class="s1">&#39;percent_change_hours&#39;</span><span class="p">]]</span>

<span class="c1"># Define your attributes</span>
<span class="n">attributes</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;station&#39;</span><span class="p">:</span> <span class="s1">&#39;Station name&#39;</span><span class="p">,</span>
    <span class="s1">&#39;country&#39;</span><span class="p">:</span> <span class="s1">&#39;Country name&#39;</span><span class="p">,</span>
    <span class="s1">&#39;threshold&#39;</span><span class="p">:</span> <span class="s1">&#39;Threshold in cm above MHHW&#39;</span><span class="p">,</span>
    <span class="s1">&#39;percent_change_days&#39;</span><span class="p">:</span> <span class="s1">&#39;Percent change in flood days per year&#39;</span><span class="p">,</span>
    <span class="s1">&#39;percent_change_hours&#39;</span><span class="p">:</span> <span class="s1">&#39;Percent change in flood hours per year&#39;</span>
<span class="p">}</span>

<span class="c1"># Open the file in write mode</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">output_dir</span> <span class="o">/</span> <span class="s1">&#39;SL_FloodFrequency_percent_change.csv&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="c1"># Write the attributes as comments</span>
    <span class="k">for</span> <span class="n">column</span><span class="p">,</span> <span class="n">attribute</span> <span class="ow">in</span> <span class="n">attributes</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;# </span><span class="si">{</span><span class="n">column</span><span class="si">}</span><span class="s1">: </span><span class="si">{</span><span class="n">attribute</span><span class="si">}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="c1"># Write the DataFrame to the file</span>
    <span class="n">percent_change_df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="n">percent_change_df</span>  
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>station</th>
      <th>country</th>
      <th>threshold</th>
      <th>percent_change_days</th>
      <th>percent_change_hours</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Johnston</td>
      <td>United States of America (the)</td>
      <td>18.3</td>
      <td>151.776650</td>
      <td>278.592765</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Hilo, Hawaii</td>
      <td>United States of America (the)</td>
      <td>20.6</td>
      <td>567.123288</td>
      <td>1368.404523</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Kawaihae</td>
      <td>United States of America (the)</td>
      <td>27.7</td>
      <td>7926.132404</td>
      <td>19354.355401</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Kahului</td>
      <td>United States of America (the)</td>
      <td>23.7</td>
      <td>371.584451</td>
      <td>764.890525</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Honolulu, Hawaii</td>
      <td>United States of America (the)</td>
      <td>19.5</td>
      <td>503.115067</td>
      <td>1153.753754</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Mokuoloe</td>
      <td>United States of America (the)</td>
      <td>18.3</td>
      <td>439.929947</td>
      <td>976.160843</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Nawiliwili</td>
      <td>United States of America (the)</td>
      <td>19.5</td>
      <td>665.054414</td>
      <td>1832.387998</td>
    </tr>
    <tr>
      <th>7</th>
      <td>Midway</td>
      <td>United States of America (the)</td>
      <td>20.8</td>
      <td>2451.954023</td>
      <td>953.152732</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#make a pretty pdf of the table with great_tables</span>
<span class="kn">from</span> <span class="nn">great_tables</span> <span class="kn">import</span> <span class="n">GT</span><span class="p">,</span> <span class="n">html</span>

<span class="c1"># Create a Table object</span>
<span class="n">table</span> <span class="o">=</span> <span class="n">GT</span><span class="p">(</span><span class="n">percent_change_df</span><span class="p">[[</span><span class="s2">&quot;station&quot;</span><span class="p">,</span><span class="s2">&quot;threshold&quot;</span><span class="p">,</span><span class="s2">&quot;percent_change_days&quot;</span><span class="p">,</span><span class="s2">&quot;percent_change_hours&quot;</span><span class="p">]])</span><span class="o">.</span><span class="n">cols_label</span><span class="p">(</span>
    <span class="n">station</span><span class="o">=</span><span class="n">html</span><span class="p">(</span><span class="s1">&#39;Station&#39;</span><span class="p">),</span> <span class="n">threshold</span><span class="o">=</span><span class="n">html</span><span class="p">(</span><span class="s1">&#39;Threshold&lt;br&gt; (cm above MHHW)&#39;</span><span class="p">),</span> 
    <span class="n">percent_change_days</span><span class="o">=</span><span class="n">html</span><span class="p">(</span><span class="s1">&#39;Change in &lt;br&gt;Flood Days (%)&#39;</span><span class="p">),</span> 
    <span class="n">percent_change_hours</span><span class="o">=</span><span class="n">html</span><span class="p">(</span><span class="s1">&#39;Change in &lt;br&gt;Flood Hours (%)&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">fmt_number</span><span class="p">(</span>
        <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;percent_change_days&quot;</span><span class="p">,</span> <span class="s2">&quot;percent_change_hours&quot;</span><span class="p">],</span> <span class="n">decimals</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="n">table</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div id="jalgkrzkap" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>
#jalgkrzkap table {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }

#jalgkrzkap thead, tbody, tfoot, tr, td, th { border-style: none; }
 tr { background-color: transparent; }
#jalgkrzkap p { margin: 0; padding: 0; }
 #jalgkrzkap .gt_table { display: table; border-collapse: collapse; line-height: normal; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; }
 #jalgkrzkap .gt_caption { padding-top: 4px; padding-bottom: 4px; }
 #jalgkrzkap .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; }
 #jalgkrzkap .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 3px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; }
 #jalgkrzkap .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; }
 #jalgkrzkap .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; }
 #jalgkrzkap .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; }
 #jalgkrzkap .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; }
 #jalgkrzkap .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; }
 #jalgkrzkap .gt_column_spanner_outer:first-child { padding-left: 0; }
 #jalgkrzkap .gt_column_spanner_outer:last-child { padding-right: 0; }
 #jalgkrzkap .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; }
 #jalgkrzkap .gt_spanner_row { border-bottom-style: hidden; }
 #jalgkrzkap .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; text-align: left; }
 #jalgkrzkap .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; }
 #jalgkrzkap .gt_from_md> :first-child { margin-top: 0; }
 #jalgkrzkap .gt_from_md> :last-child { margin-bottom: 0; }
 #jalgkrzkap .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; }
 #jalgkrzkap .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; }
 #jalgkrzkap .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; }
 #jalgkrzkap .gt_row_group_first td { border-top-width: 2px; }
 #jalgkrzkap .gt_row_group_first th { border-top-width: 2px; }
 #jalgkrzkap .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; }
 #jalgkrzkap .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; }
 #jalgkrzkap .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; text-align: left; }
 #jalgkrzkap .gt_left { text-align: left; }
 #jalgkrzkap .gt_center { text-align: center; }
 #jalgkrzkap .gt_right { text-align: right; font-variant-numeric: tabular-nums; }
 #jalgkrzkap .gt_font_normal { font-weight: normal; }
 #jalgkrzkap .gt_font_bold { font-weight: bold; }
 #jalgkrzkap .gt_font_italic { font-style: italic; }
 #jalgkrzkap .gt_super { font-size: 65%; }
 #jalgkrzkap .gt_footnote_marks { font-size: 75%; vertical-align: 0.4em; position: initial; }
 #jalgkrzkap .gt_asterisk { font-size: 100%; vertical-align: 0; }
 
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">

<tr class="gt_col_headings">
  <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Station">Station</th>
  <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Threshold&lt;br&gt; (cm above MHHW)">Threshold<br> (cm above MHHW)</th>
  <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Change in &lt;br&gt;Flood Days (%)">Change in <br>Flood Days (%)</th>
  <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Change in &lt;br&gt;Flood Hours (%)">Change in <br>Flood Hours (%)</th>
</tr>
<tbody class="gt_table_body">
  <tr>
    <td class="gt_row gt_left">Johnston</td>
    <td class="gt_row gt_right">18.3</td>
    <td class="gt_row gt_right">151.8</td>
    <td class="gt_row gt_right">278.6</td>
  </tr>
  <tr>
    <td class="gt_row gt_left">Hilo, Hawaii</td>
    <td class="gt_row gt_right">20.6</td>
    <td class="gt_row gt_right">567.1</td>
    <td class="gt_row gt_right">1,368.4</td>
  </tr>
  <tr>
    <td class="gt_row gt_left">Kawaihae</td>
    <td class="gt_row gt_right">27.7</td>
    <td class="gt_row gt_right">7,926.1</td>
    <td class="gt_row gt_right">19,354.4</td>
  </tr>
  <tr>
    <td class="gt_row gt_left">Kahului</td>
    <td class="gt_row gt_right">23.7</td>
    <td class="gt_row gt_right">371.6</td>
    <td class="gt_row gt_right">764.9</td>
  </tr>
  <tr>
    <td class="gt_row gt_left">Honolulu, Hawaii</td>
    <td class="gt_row gt_right">19.5</td>
    <td class="gt_row gt_right">503.1</td>
    <td class="gt_row gt_right">1,153.8</td>
  </tr>
  <tr>
    <td class="gt_row gt_left">Mokuoloe</td>
    <td class="gt_row gt_right">18.3</td>
    <td class="gt_row gt_right">439.9</td>
    <td class="gt_row gt_right">976.2</td>
  </tr>
  <tr>
    <td class="gt_row gt_left">Nawiliwili</td>
    <td class="gt_row gt_right">19.5</td>
    <td class="gt_row gt_right">665.1</td>
    <td class="gt_row gt_right">1,832.4</td>
  </tr>
  <tr>
    <td class="gt_row gt_left">Midway</td>
    <td class="gt_row gt_right">20.8</td>
    <td class="gt_row gt_right">2,452.0</td>
    <td class="gt_row gt_right">953.2</td>
  </tr>
</tbody>


</table>

</div>
        </div></div>
</div>
<p>The following cell defines a function that creates a “zebra stripe” pattern for the map borders.</p>
<div class="cell tag_hide-input docutils container">
<details class="hide above-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell source</span>
<span class="expanded">Hide code cell source</span>
</summary>
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">add_zebra_frame</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">segment_length</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">()):</span>
    <span class="c1"># Get the current extent of the map</span>
    <span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">,</span> <span class="n">bot</span><span class="p">,</span> <span class="n">top</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_extent</span><span class="p">(</span><span class="n">crs</span><span class="o">=</span><span class="n">crs</span><span class="p">)</span>

    <span class="c1"># Calculate the nearest 0 or 0.5 degree mark within the current extent</span>
    <span class="n">left_start</span> <span class="o">=</span> <span class="n">left</span> <span class="o">-</span> <span class="n">left</span> <span class="o">%</span> <span class="n">segment_length</span>
    <span class="n">bot_start</span> <span class="o">=</span> <span class="n">bot</span> <span class="o">-</span> <span class="n">bot</span> <span class="o">%</span> <span class="n">segment_length</span>

    <span class="c1"># Adjust the start if it does not align with the desired segment start</span>
    <span class="k">if</span> <span class="n">left</span> <span class="o">%</span> <span class="n">segment_length</span> <span class="o">&gt;=</span> <span class="n">segment_length</span> <span class="o">/</span> <span class="mi">2</span><span class="p">:</span>
        <span class="n">left_start</span> <span class="o">+=</span> <span class="n">segment_length</span>
    <span class="k">if</span> <span class="n">bot</span> <span class="o">%</span> <span class="n">segment_length</span> <span class="o">&gt;=</span> <span class="n">segment_length</span> <span class="o">/</span> <span class="mi">2</span><span class="p">:</span>
        <span class="n">bot_start</span> <span class="o">+=</span> <span class="n">segment_length</span>

    <span class="c1"># Extend the frame slightly beyond the map extent to ensure full coverage</span>
    <span class="n">right_end</span> <span class="o">=</span> <span class="n">right</span> <span class="o">+</span> <span class="p">(</span><span class="n">segment_length</span> <span class="o">-</span> <span class="n">right</span> <span class="o">%</span> <span class="n">segment_length</span><span class="p">)</span>
    <span class="n">top_end</span> <span class="o">=</span> <span class="n">top</span> <span class="o">+</span> <span class="p">(</span><span class="n">segment_length</span> <span class="o">-</span> <span class="n">top</span> <span class="o">%</span> <span class="n">segment_length</span><span class="p">)</span>

    <span class="c1"># Calculate the number of segments needed for each side</span>
    <span class="n">num_segments_x</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ceil</span><span class="p">((</span><span class="n">right_end</span> <span class="o">-</span> <span class="n">left_start</span><span class="p">)</span> <span class="o">/</span> <span class="n">segment_length</span><span class="p">))</span>
    <span class="n">num_segments_y</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ceil</span><span class="p">((</span><span class="n">top_end</span> <span class="o">-</span> <span class="n">bot_start</span><span class="p">)</span> <span class="o">/</span> <span class="n">segment_length</span><span class="p">))</span>

    <span class="c1"># Draw horizontal stripes at the top and bottom</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_segments_x</span><span class="p">):</span>
        <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;black&#39;</span> <span class="k">if</span> <span class="p">(</span><span class="n">left_start</span> <span class="o">+</span> <span class="n">i</span> <span class="o">*</span> <span class="n">segment_length</span><span class="p">)</span> <span class="o">%</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">segment_length</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="s1">&#39;white&#39;</span>
        <span class="n">start_x</span> <span class="o">=</span> <span class="n">left_start</span> <span class="o">+</span> <span class="n">i</span> <span class="o">*</span> <span class="n">segment_length</span>
        <span class="n">end_x</span> <span class="o">=</span> <span class="n">start_x</span> <span class="o">+</span> <span class="n">segment_length</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">hlines</span><span class="p">([</span><span class="n">bot</span><span class="p">,</span> <span class="n">top</span><span class="p">],</span> <span class="n">start_x</span><span class="p">,</span> <span class="n">end_x</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="n">color</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="n">lw</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">crs</span><span class="p">)</span>

    <span class="c1"># Draw vertical stripes on the left and right</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_segments_y</span><span class="p">):</span>
        <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;black&#39;</span> <span class="k">if</span> <span class="p">(</span><span class="n">bot_start</span> <span class="o">+</span> <span class="n">j</span> <span class="o">*</span> <span class="n">segment_length</span><span class="p">)</span> <span class="o">%</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">segment_length</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="s1">&#39;white&#39;</span>
        <span class="n">start_y</span> <span class="o">=</span> <span class="n">bot_start</span> <span class="o">+</span> <span class="n">j</span> <span class="o">*</span> <span class="n">segment_length</span>
        <span class="n">end_y</span> <span class="o">=</span> <span class="n">start_y</span> <span class="o">+</span> <span class="n">segment_length</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">vlines</span><span class="p">([</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">],</span> <span class="n">start_y</span><span class="p">,</span> <span class="n">end_y</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="n">color</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="n">lw</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">crs</span><span class="p">)</span>
</pre></div>
</div>
</div>
</details>
</div>
<p>The following cell defines a function to implement the zebra stripes on a given axis.</p>
<div class="cell tag_hide-input docutils container">
<details class="hide above-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell source</span>
<span class="expanded">Hide code cell source</span>
</summary>
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">plot_zebra_frame</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">segment_length</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">()):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Plot a zebra frame on the given axes.</span>

<span class="sd">    Parameters:</span>
<span class="sd">    - ax: The axes object on which to plot the zebra frame.</span>
<span class="sd">    - lw: The line width of the zebra frame. Default is 5.</span>
<span class="sd">    - segment_length: The length of each segment in the zebra frame. Default is 2.</span>
<span class="sd">    - crs: The coordinate reference system of the axes. Default is ccrs.PlateCarree().</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Call the function to add the zebra frame</span>
    <span class="n">add_zebra_frame</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="n">lw</span><span class="p">,</span> <span class="n">segment_length</span><span class="o">=</span><span class="n">segment_length</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="n">crs</span><span class="p">)</span>
    <span class="c1"># add map grid</span>
    <span class="n">gl</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">gridlines</span><span class="p">(</span><span class="n">draw_labels</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;:&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span>
                      <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span><span class="n">xlocs</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xticks</span><span class="p">(),</span><span class="n">ylocs</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">get_yticks</span><span class="p">())</span>
    <span class="c1">#remove labels from top and right axes</span>
    <span class="n">gl</span><span class="o">.</span><span class="n">top_labels</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">gl</span><span class="o">.</span><span class="n">right_labels</span> <span class="o">=</span> <span class="kc">False</span>
</pre></div>
</div>
</div>
</details>
</div>
<p>The following cell defines a function to add arrow icons denoting percent change.</p>
<div class="cell tag_hide-input docutils container">
<details class="hide above-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell source</span>
<span class="expanded">Hide code cell source</span>
</summary>
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># make a function for adding the arrows</span>
<span class="k">def</span> <span class="nf">add_arrow</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span><span class="n">lon</span><span class="p">,</span><span class="n">percent_change</span><span class="p">,</span><span class="n">crs</span><span class="p">,</span> <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">):</span>
<span class="c1"># make colormap of percent change</span>
    <span class="n">adjusted_heatmap_palette</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">(</span><span class="s2">&quot;YlOrRd&quot;</span><span class="p">,</span> <span class="n">as_cmap</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># Prepare data for quiver plot</span>
    <span class="n">U</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="n">lon</span><span class="p">)</span>  <span class="c1"># Dummy U component (no horizontal movement)</span>
    <span class="n">V</span> <span class="o">=</span> <span class="n">percent_change</span><span class="o">/</span><span class="mi">100</span>   <span class="c1"># V component scaled by percent change</span>
    <span class="n">arrow_scale</span> <span class="o">=</span> <span class="mf">0.2</span>  <span class="c1"># Adjust as necessary for arrow size</span>
    <span class="n">arrow_width</span> <span class="o">=</span> <span class="mf">0.01</span>  <span class="c1"># Adjust for desired arrow thickness</span>

    <span class="c1"># Quiver plot</span>
    <span class="n">q</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">quiver</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span><span class="n">lat</span><span class="p">,</span> <span class="n">U</span><span class="p">,</span> <span class="n">V</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">crs</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="n">arrow_scale</span><span class="p">,</span>
              <span class="n">color</span><span class="o">=</span><span class="n">adjusted_heatmap_palette</span><span class="p">(</span><span class="n">percent_change</span><span class="o">.</span><span class="n">values</span><span class="p">),</span> 
              <span class="n">cmap</span><span class="o">=</span><span class="n">adjusted_heatmap_palette</span><span class="p">,</span> <span class="n">clim</span><span class="o">=</span><span class="p">(</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">),</span> <span class="n">width</span><span class="o">=</span><span class="n">arrow_width</span><span class="p">)</span>
</pre></div>
</div>
</div>
</details>
</div>
<p>And here is our final plotting code:</p>
<div class="cell tag_hide-output tag_hide-input docutils container">
<details class="hide above-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell source</span>
<span class="expanded">Hide code cell source</span>
</summary>
<div class="cell_input above-output-prompt docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">xlims</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">185</span><span class="p">,</span><span class="o">-</span><span class="mi">152</span><span class="p">]</span>
<span class="n">ylims</span> <span class="o">=</span> <span class="p">[</span><span class="mi">14</span><span class="p">,</span><span class="mi">40</span><span class="p">]</span>

<span class="c1">#fig, ax, crs,cmap = plot_map(vmin,vmax,xlims,ylims)</span>
<span class="n">crs</span> <span class="o">=</span> <span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">()</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span><span class="n">subplot_kw</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;projection&#39;</span><span class="p">:</span> <span class="n">crs</span><span class="p">})</span>

<span class="c1">#convert subset[&#39;lon&#39;] to negative from 360</span>
<span class="n">SL_daily_max</span><span class="p">[</span><span class="s1">&#39;lon_west&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="mi">360</span><span class="o">-</span><span class="n">SL_daily_max</span><span class="p">[</span><span class="s1">&#39;lon&#39;</span><span class="p">])</span>


<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">ax</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">axs</span><span class="p">):</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">xlims</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">ylims</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">coastlines</span><span class="p">()</span>

     <span class="c1"># Fill in water</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">cfeature</span><span class="o">.</span><span class="n">LAND</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;lightgrey&#39;</span><span class="p">)</span>
    
 <span class="c1"># add a) b) labels</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mf">0.95</span><span class="p">,</span> <span class="mf">0.95</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;(</span><span class="si">{</span><span class="nb">chr</span><span class="p">(</span><span class="mi">97</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">)</span><span class="si">}</span><span class="s1">)&#39;</span><span class="p">,</span> 
         <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="n">verticalalignment</span><span class="o">=</span><span class="s1">&#39;top&#39;</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">transAxes</span><span class="p">,</span>
         <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">cfeature</span><span class="o">.</span><span class="n">OCEAN</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;lightblue&#39;</span><span class="p">)</span>

    <span class="c1"># add map grid</span>
    <span class="n">gl</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">gridlines</span><span class="p">(</span><span class="n">draw_labels</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;:&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span>
                  <span class="n">alpha</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span><span class="n">xlocs</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xticks</span><span class="p">(),</span><span class="n">ylocs</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">get_yticks</span><span class="p">())</span>
  
    <span class="c1">#remove labels from top and right axes</span>
    <span class="n">gl</span><span class="o">.</span><span class="n">top_labels</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">gl</span><span class="o">.</span><span class="n">right_labels</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">if</span> <span class="n">ax</span> <span class="o">==</span> <span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
        <span class="n">gl</span><span class="o">.</span><span class="n">left_labels</span> <span class="o">=</span> <span class="kc">False</span>

<span class="n">add_arrow</span><span class="p">(</span><span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">SL_daily_max</span><span class="p">[</span><span class="s1">&#39;lat&#39;</span><span class="p">],</span> <span class="n">SL_daily_max</span><span class="p">[</span><span class="s1">&#39;lon_west&#39;</span><span class="p">],</span> <span class="n">ds</span><span class="p">[</span><span class="s1">&#39;slope_days&#39;</span><span class="p">],</span> <span class="n">crs</span><span class="p">,</span> <span class="n">ds</span><span class="p">[</span><span class="s1">&#39;slope_days&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">ds</span><span class="p">[</span><span class="s1">&#39;slope_days&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
<span class="n">add_arrow</span><span class="p">(</span><span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">SL_daily_max</span><span class="p">[</span><span class="s1">&#39;lat&#39;</span><span class="p">],</span> <span class="n">SL_daily_max</span><span class="p">[</span><span class="s1">&#39;lon_west&#39;</span><span class="p">],</span> <span class="n">ds</span><span class="p">[</span><span class="s1">&#39;slope_hours&#39;</span><span class="p">],</span> <span class="n">crs</span><span class="p">,</span> <span class="n">ds</span><span class="p">[</span><span class="s1">&#39;slope_hours&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">ds</span><span class="p">[</span><span class="s1">&#39;slope_hours&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>

<span class="c1"># Plot zebra frame</span>
<span class="c1">#plot_zebra_frame(axs[0], lw=5, segment_length=2, crs=crs)</span>
<span class="c1">#plot_zebra_frame(axs[1], lw=5, segment_length=2, crs=crs)</span>

<span class="c1">## Add text for percent change</span>
<span class="c1">#for i in range(len(subset[&#39;lon&#39;])):</span>
<span class="c1">#    if ds[&#39;percent_change_hours&#39;].values[i] &lt;200:</span>
        <span class="c1">#axs[0].text(subset[&#39;lon&#39;][i], subset[&#39;lat&#39;][i], &#39;{:.1f}&#39;.format(ds[&#39;slope_days&#39;].values[i]),</span>
                    <span class="c1">#color=adjusted_heatmap_palette(ds[&#39;slope_days&#39;].values[i] / vmax))</span>
        <span class="c1">#axs[1].text(subset[&#39;lon_west&#39;][i]+0.25, subset[&#39;lat&#39;][i]+0.5 , &#39;{:.1f}&#39;.format(ds[&#39;slope_hours&#39;].values[i]), fontsize=10,</span>
                    <span class="c1">#color=adjusted_heatmap_palette(ds[&#39;slope_hours&#39;].values[i] / vmax))</span>

<span class="n">glue</span><span class="p">(</span><span class="s2">&quot;mag_fig&quot;</span><span class="p">,</span> <span class="n">fig</span><span class="p">,</span> <span class="n">display</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># # Save the figure</span>
<span class="n">output_file_path</span> <span class="o">=</span> <span class="n">output_dir</span> <span class="o">/</span> <span class="s1">&#39;SL_FloodFrequency_map.png&#39;</span>
<span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">output_file_path</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">bbox_inches</span><span class="o">=</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</details>
<details class="hide below-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell output</span>
<span class="expanded">Hide code cell output</span>
</summary>
<div class="cell_output docutils container">
<img alt="../_images/5d2ced76e312a8e6cb97ad2a1dde49cdbabb48c4c3dfc88194d18fa1f56665b3.png" src="../_images/5d2ced76e312a8e6cb97ad2a1dde49cdbabb48c4c3dfc88194d18fa1f56665b3.png" />
</div>
</details>
</div>
<figure class="align-default" id="mag-fig">
<img alt="../_images/5d2ced76e312a8e6cb97ad2a1dde49cdbabb48c4c3dfc88194d18fa1f56665b3.png" src="../_images/5d2ced76e312a8e6cb97ad2a1dde49cdbabb48c4c3dfc88194d18fa1f56665b3.png" />
<figcaption>
<p><span class="caption-number">Fig. 14 </span><span class="caption-text">Map of the rate of change in average flood (a) days and (b) hours per year above the <span class="pasted-text">99.000</span>th threshold of water levels at at <code class="docutils literal notranslate"><span class="pre">'Hawaiian</span> <span class="pre">Islands'</span></code> tide gauges from  to </span><a class="headerlink" href="#mag-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
</section>
</section>
<hr class="docutils" />
<section id="citations">
<h2>Citations<a class="headerlink" href="#citations" title="Permalink to this heading">#</a></h2>
<p>:::{bibliography}
:style: alpha
:filter: docname in docnames
:::</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "jwfiedler/SL_Hawaii",
            ref: "main",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./notebooks"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="Flood.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Minor Flood Frequency and Duration</p>
      </div>
    </a>
    <a class="right-next"
       href="FloodDuration.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Flood Duration</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#setup">Setup</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#retrieve-the-preprocessed-data-set">Retrieve the Preprocessed Data Set</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#plot-the-data-to-see-what-we-ve-got">Plot the data to see what we’ve got</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#take-a-look-at-the-data">Take a look at the data</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#plot-flood-frequency-counts">Plot Flood Frequency Counts</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#plot-flood-duration">Plot Flood Duration</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#calculate-the-percent-change-over-time">Calculate the percent change over time</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#plot-time-series-of-all-stations">Plot time series of all stations</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#create-a-table">Create a Table</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#citations">Citations</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Playground Coordinator
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2024.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>